{"ast":null,"code":"import _regeneratorRuntime from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useContext,useEffect,useState}from'react';import styled from'styled-components';import FriendList from'../components/GroupsAndFriendsComponents/FriendList';import GroupList from'../components/GroupsAndFriendsComponents/GroupList';import FeedCard from'../components/GroupsAndFriendsComponents/FeedCard';import axios from'../Axios';import{UserContext}from'../UserContext';import{Button,Drawer}from'@material-ui/core';import IconButton from'@material-ui/core/IconButton';import Divider from'@material-ui/core/Divider';import CloseIcon from'@material-ui/icons/Close';import config from'../Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    margin-left: 10px;\\n    width: 100%;\\n\"])));var GroupsAndFriends=function GroupsAndFriends(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friends=_useState2[0],setFriends=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),groups=_useState6[0],setGroups=_useState6[1];var _useContext=useContext(UserContext),user=_useContext.user;var _useState7=useState({owner:{firstName:'',surname:'',userId:'',email:'',image:'',password:'',phoneNumber:'',activityLevel:'',points:''},groupName:'',groupId:'-1',users:[]}),_useState8=_slicedToArray(_useState7,2),selectedGroup=_useState8[0],setSelectedGroup=_useState8[1];var _useState9=useState({mobileView:false,drawerOpen:false,drawerOpen2:false}),_useState10=_slicedToArray(_useState9,2),state=_useState10[0],setState=_useState10[1];var mobileView=state.mobileView,drawerOpen=state.drawerOpen,drawerOpen2=state.drawerOpen2;useEffect(function(){var setResponsiveness=function setResponsiveness(){return window.innerWidth<951?setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{mobileView:true});}):setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{mobileView:false});});};setResponsiveness();window.addEventListener('resize',function(){return setResponsiveness();});},[]);//henter alle dine grupper\nuseEffect(function(){updateGroups();},[]);var updateGroups=function updateGroups(){console.log('oppdaterer');var url=\"user/\".concat(user,\"/group\");axios.get(url,config).then(function(response){setGroups(response.data['groups']);if(selectedGroup.groupId==='-1'&&response.data['groups'].length>0){setSelectedGroup(response.data['groups'][0]);}}).catch(function(error){console.log('Kunne ikke hente dine grupper'+error.message);});};//henter alle users\nuseEffect(function(){axios.get('/user').then(function(response){console.log(response.data);setUsers(response.data.filter(function(test){return Object.values(test)[0]!=user&&friendCheck(test);}));}).catch(function(error){return console.log(error);});},[friends,user]);var handleGroupClicked=function handleGroupClicked(group){setSelectedGroup(group);};var leaveGroup=function leaveGroup(){var groupId=selectedGroup.groupId;axios.delete(\"group/\".concat(groupId,\"/user/\").concat(user),config).then(function(response){JSON.stringify(response);console.log(response.data);}).then(function(){updateGroups();setSelectedGroup({owner:{firstName:'',surname:'',userId:'',email:'',image:'',password:'',phoneNumber:'',activityLevel:'',points:''},groupName:'',groupId:'0',users:[]});}).catch(function(error){alert('Du kan ikke forlate gruppen mens du er eier');console.log('Kunne ikke forlate gruppe: '+error.message);});};var deleteGroup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var groupId,request;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(selectedGroup.owner['userId'].toString()===user)){_context.next=10;break;}groupId=selectedGroup.groupId;_context.next=4;return axios.delete(\"/group/\".concat(groupId),config);case 4:request=_context.sent;setSelectedGroup({owner:{firstName:'',surname:'',userId:'',email:'',image:'',password:'',phoneNumber:'',activityLevel:'',points:''},groupName:'',groupId:'-1',users:[]});updateGroups();return _context.abrupt(\"return\",request);case 10:console.log('You must be the owner in order to delete the group.');case 11:case\"end\":return _context.stop();}}},_callee);}));return function deleteGroup(){return _ref.apply(this,arguments);};}();//sjekker om user finnes i friends\nvar friendCheck=function friendCheck(test){var a=true;friends.forEach(function(friend){if(Object.values(friend)[0]===Object.values(test)[0]){a=false;}});return a;};var updateFriends=function updateFriends(){axios.get(\"/user/\".concat(user,\"/user\"),config).then(function(response){console.log('Venner:');console.log(response.data['users']);setFriends(response.data['users']);}).catch(function(error){return console.log(error);});};//henter ut alle venner\nuseEffect(function(){updateFriends();},[user]);var displayDesktop=function displayDesktop(){return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'20%',minWidth:'200px'},children:/*#__PURE__*/_jsx(FriendList,{updateFriends:updateFriends,users:users,friends:friends})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'57%'},children:/*#__PURE__*/_jsx(FeedCard,{selectedGroup:selectedGroup,updateGroups:updateGroups,leaveGroup:leaveGroup,deleteGroup:deleteGroup})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'20%',minWidth:'200px',marginRight:'20px'},children:/*#__PURE__*/_jsx(GroupList,{updateGroups:updateGroups,friends:friends,groups:groups,handleGroupClicked:handleGroupClicked})})]});};var displayMobile=function displayMobile(){var handleDrawerOpen=function handleDrawerOpen(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen:true});});};var handleDrawerClose=function handleDrawerClose(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen:false});});};var handleDrawerOpen2=function handleDrawerOpen2(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen2:true});});};var handleDrawerClose2=function handleDrawerClose2(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen2:false});});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Button,{style:{border:'1px solid lightgrey',marginTop:'5px',width:'90%',marginRight:'5px'},onClick:handleDrawerOpen,children:\"Dine Venner\"}),/*#__PURE__*/_jsxs(Drawer,{style:{width:'50px'},anchor:'bottom',open:drawerOpen,onClose:handleDrawerClose,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(IconButton,{style:{position:'absolute',top:'5px',right:'0'},onClick:handleDrawerClose,children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(\"b\",{style:{textAlign:'center'},children:\"Dine venner\"}),/*#__PURE__*/_jsx(Divider,{style:{marginTop:'20px'}}),/*#__PURE__*/_jsx(FriendList,{updateFriends:updateFriends,users:users,friends:friends})]}),/*#__PURE__*/_jsx(Button,{style:{border:'1px solid lightgrey',marginTop:'5px',width:'90%',marginRight:'20px'},onClick:handleDrawerOpen2,children:\"Dine grupper\"}),/*#__PURE__*/_jsxs(Drawer,{style:{width:'50px'},anchor:'bottom',open:drawerOpen2,onClose:handleDrawerClose2,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(IconButton,{style:{position:'absolute',top:'5px',right:'0'},onClick:handleDrawerClose2,children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(\"b\",{style:{textAlign:'center'},children:\"Dine grupper\"}),/*#__PURE__*/_jsx(Divider,{style:{marginTop:'20px'}}),/*#__PURE__*/_jsx(GroupList,{onClick:handleDrawerClose2,updateGroups:updateGroups,friends:friends,groups:groups,handleGroupClicked:handleGroupClicked})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%'},children:/*#__PURE__*/_jsx(FeedCard,{selectedGroup:selectedGroup,updateGroups:updateGroups,leaveGroup:leaveGroup,deleteGroup:deleteGroup})})]});};return/*#__PURE__*/_jsx(\"div\",{children:mobileView?displayMobile():displayDesktop()});};export default GroupsAndFriends;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/containers/GroupsAndFriends.tsx"],"names":["React","useContext","useEffect","useState","styled","FriendList","GroupList","FeedCard","axios","UserContext","Button","Drawer","IconButton","Divider","CloseIcon","config","Container","div","GroupsAndFriends","friends","setFriends","users","setUsers","groups","setGroups","user","owner","firstName","surname","userId","email","image","password","phoneNumber","activityLevel","points","groupName","groupId","selectedGroup","setSelectedGroup","mobileView","drawerOpen","drawerOpen2","state","setState","setResponsiveness","window","innerWidth","prevState","addEventListener","updateGroups","console","log","url","get","then","response","data","length","catch","error","message","filter","test","Object","values","friendCheck","handleGroupClicked","group","leaveGroup","delete","JSON","stringify","alert","deleteGroup","toString","request","a","forEach","friend","updateFriends","displayDesktop","width","minWidth","marginRight","displayMobile","handleDrawerOpen","handleDrawerClose","handleDrawerOpen2","handleDrawerClose2","border","marginTop","anchor","open","onClose","position","top","right","textAlign"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport FriendList from '../components/GroupsAndFriendsComponents/FriendList';\nimport GroupList from '../components/GroupsAndFriendsComponents/GroupList';\nimport FeedCard from '../components/GroupsAndFriendsComponents/FeedCard';\nimport User from '../interfaces/User';\nimport axios from '../Axios';\nimport { UserContext } from '../UserContext';\nimport Group from '../interfaces/Group';\nimport { Button, Drawer } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport CloseIcon from '@material-ui/icons/Close';\nimport config from '../Config';\n\n\nconst Container = styled.div`\n    display: flex;\n    margin-left: 10px;\n    width: 100%;\n`;\n\nconst GroupsAndFriends = () => {\n    const [friends, setFriends] = useState<User[]>([]);\n    const [users, setUsers] = useState<User[]>([]);\n    const [groups, setGroups] = useState<Group[]>([]);\n    const { user } = useContext(UserContext);\n    const [selectedGroup, setSelectedGroup] = useState<Group>({\n        owner: {\n            firstName: '',\n            surname: '',\n            userId: '',\n            email: '',\n            image: '',\n            password: '',\n            phoneNumber: '',\n            activityLevel: '',\n            points: '',\n        },\n        groupName: '',\n        groupId: '-1',\n        users: [],\n    });\n\n    const [state, setState] = useState({\n        mobileView: false,\n        drawerOpen: false,\n        drawerOpen2: false,\n    });\n\n    const { mobileView, drawerOpen, drawerOpen2 } = state;\n\n    useEffect(() => {\n        const setResponsiveness = () => {\n            return window.innerWidth < 951\n                ? setState((prevState) => ({ ...prevState, mobileView: true }))\n                : setState((prevState) => ({\n                      ...prevState,\n                      mobileView: false,\n                  }));\n        };\n        setResponsiveness();\n        window.addEventListener('resize', () => setResponsiveness());\n    }, []);\n\n    //henter alle dine grupper\n    useEffect(() => {\n        updateGroups();\n    }, []);\n\n    const updateGroups = () => {\n        console.log('oppdaterer');\n        const url = `user/${user}/group`;\n        axios\n            .get(url, config)\n            .then((response) => {\n                setGroups(response.data['groups']);\n                if (\n                    selectedGroup.groupId === '-1' &&\n                    response.data['groups'].length > 0\n                ) {\n                    setSelectedGroup(response.data['groups'][0]);\n                }\n            })\n            .catch((error) => {\n                console.log('Kunne ikke hente dine grupper' + error.message);\n            });\n    };\n\n    //henter alle users\n    useEffect(() => {\n        axios\n            .get('/user')\n            .then((response) => {\n                console.log(response.data);\n                setUsers(\n                    response.data.filter(\n                        (test: { userID: string }) =>\n                            Object.values(test)[0] != user && friendCheck(test)\n                    )\n                );\n            })\n            .catch((error) => console.log(error));\n    }, [friends, user]);\n\n    const handleGroupClicked = (group: Group) => {\n        setSelectedGroup(group);\n    };\n\n    const leaveGroup = () => {\n        const groupId = selectedGroup.groupId;\n        axios\n            .delete(`group/${groupId}/user/${user}`, config)\n            .then((response) => {\n                JSON.stringify(response);\n                console.log(response.data);\n            })\n            .then(() => {\n                updateGroups();\n                setSelectedGroup({\n                    owner: {\n                        firstName: '',\n                        surname: '',\n                        userId: '',\n                        email: '',\n                        image: '',\n                        password: '',\n                        phoneNumber: '',\n                        activityLevel: '',\n                        points: '',\n                    },\n                    groupName: '',\n                    groupId: '0',\n                    users: [],\n                });\n            })\n            .catch((error) => {\n                alert('Du kan ikke forlate gruppen mens du er eier');\n                console.log('Kunne ikke forlate gruppe: ' + error.message);\n            });\n    };\n\n    const deleteGroup = async () => {\n        if ((selectedGroup.owner['userId'].toString() === user)) {\n            const groupId = selectedGroup.groupId;\n            const request = await axios.delete(`/group/${groupId}`, config);\n            setSelectedGroup({\n                owner: {\n                    firstName: '',\n                    surname: '',\n                    userId: '',\n                    email: '',\n                    image: '',\n                    password: '',\n                    phoneNumber: '',\n                    activityLevel: '',\n                    points: '',\n                },\n                groupName: '',\n                groupId: '-1',\n                users: [],\n            });\n            updateGroups();\n            return request;\n        } else {\n            console.log('You must be the owner in order to delete the group.');\n        }\n    };\n\n    //sjekker om user finnes i friends\n    const friendCheck = (test: any) => {\n        let a = true;\n        friends.forEach(function (friend) {\n            if (Object.values(friend)[0] === Object.values(test)[0]) {\n                a = false;\n            }\n        });\n        return a;\n    };\n\n    const updateFriends = () => {\n        axios\n            .get(`/user/${user}/user`, config)\n            .then((response) => {\n                console.log('Venner:');\n                console.log(response.data['users']);\n                setFriends(response.data['users']);\n            })\n            .catch((error) => console.log(error));\n    };\n    //henter ut alle venner\n    useEffect(() => {\n        updateFriends();\n    }, [user]);\n\n    const displayDesktop = () => {\n        return (\n            <Container>\n                <div style={{ width: '20%', minWidth: '200px' }}>\n                    <FriendList\n                        updateFriends={updateFriends}\n                        users={users}\n                        friends={friends}\n                    />\n                </div>\n                <div style={{ width: '57%' }}>\n                    <FeedCard\n                        selectedGroup={selectedGroup}\n                        updateGroups={updateGroups}\n                        leaveGroup={leaveGroup}\n                        deleteGroup={deleteGroup}\n                    ></FeedCard>\n                </div>\n                <div\n                    style={{\n                        width: '20%',\n                        minWidth: '200px',\n                        marginRight: '20px',\n                    }}\n                >\n                    <GroupList\n                        updateGroups={updateGroups}\n                        friends={friends}\n                        groups={groups}\n                        handleGroupClicked={handleGroupClicked}\n                    />\n                </div>\n            </Container>\n        );\n    };\n\n    const displayMobile = () => {\n        const handleDrawerOpen = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen: true }));\n\n        const handleDrawerClose = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen: false }));\n\n        const handleDrawerOpen2 = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen2: true }));\n\n        const handleDrawerClose2 = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen2: false }));\n\n        return (\n            <div>\n                <Container>\n                    <Button\n                        style={{\n                            border: '1px solid lightgrey',\n                            marginTop: '5px',\n                            width: '90%',\n                            marginRight: '5px',\n                        }}\n                        onClick={handleDrawerOpen}\n                    >\n                        Dine Venner\n                    </Button>\n                    <Drawer\n                        style={{ width: '50px' }}\n                        {...{\n                            anchor: 'bottom',\n                            open: drawerOpen,\n                            onClose: handleDrawerClose,\n                        }}\n                    >\n                        <br />\n                        <IconButton\n                            style={{\n                                position: 'absolute',\n                                top: '5px',\n                                right: '0',\n                            }}\n                            onClick={handleDrawerClose}\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <b style={{ textAlign: 'center' }}>Dine venner</b>\n                        <Divider style={{ marginTop: '20px' }} />\n                        <FriendList\n                            updateFriends={updateFriends}\n                            users={users}\n                            friends={friends}\n                        />\n                    </Drawer>\n\n                    <Button\n                        style={{\n                            border: '1px solid lightgrey',\n                            marginTop: '5px',\n                            width: '90%',\n                            marginRight: '20px',\n                        }}\n                        onClick={handleDrawerOpen2}\n                    >\n                        Dine grupper\n                    </Button>\n                    <Drawer\n                        style={{ width: '50px' }}\n                        {...{\n                            anchor: 'bottom',\n                            open: drawerOpen2,\n                            onClose: handleDrawerClose2,\n                        }}\n                    >\n                        <br />\n                        <IconButton\n                            style={{\n                                position: 'absolute',\n                                top: '5px',\n                                right: '0',\n                            }}\n                            onClick={handleDrawerClose2}\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <b style={{ textAlign: 'center' }}>Dine grupper</b>\n                        <Divider style={{ marginTop: '20px' }} />\n                        <GroupList\n                            onClick={handleDrawerClose2}\n                            updateGroups={updateGroups}\n                            friends={friends}\n                            groups={groups}\n                            handleGroupClicked={handleGroupClicked}\n                        />\n                    </Drawer>\n                </Container>\n                <div style={{ width: '100%' }}>\n                    <FeedCard\n                        selectedGroup={selectedGroup}\n                        updateGroups={updateGroups}\n                        leaveGroup={leaveGroup}\n                        deleteGroup={deleteGroup}\n                    ></FeedCard>\n                </div>\n            </div>\n        );\n    };\n\n    return <div>{mobileView ? displayMobile() : displayDesktop()}</div>;\n};\n\nexport default GroupsAndFriends;\n"]},"metadata":{},"sourceType":"module"}