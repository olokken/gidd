{"ast":null,"code":"import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{AppBar,Button,Toolbar,MenuItem,Drawer}from'@material-ui/core';import IconButton from'@material-ui/core/IconButton';import React,{useState,useEffect,useContext}from'react';import{useHistory}from'react-router-dom';import logo from'../../assets/logo.png';import ChatIcon from'@material-ui/icons/Chat';import Menu from'@material-ui/core/Menu';import NotificationsIcon from'@material-ui/icons/Notifications';import AccountBoxIcon from'@material-ui/icons/AccountBox';import{withStyles}from'@material-ui/core/styles';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import MenuIcon from'@material-ui/icons/Menu';import CloseIcon from'@material-ui/icons/Close';import Divider from'@material-ui/core/Divider';import CalendarTodayIcon from'@material-ui/icons/CalendarToday';import MapIcon from'@material-ui/icons/Map';import PeopleIcon from'@material-ui/icons/People';import EmojiEventsIcon from'@material-ui/icons/EmojiEvents';import DirectionsRunIcon from'@material-ui/icons/DirectionsRun';import Popup from'../Popup';import MyUser from'../MyUser';import axios from'../../Axios';import{UserContext}from'../../UserContext';import CheckIcon from'@material-ui/icons/Check';import Badge from'@material-ui/core/Badge';import ChatAlerts from'./ChatAlerts';import config from'../../Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledMenu=withStyles({paper:{border:'1px solid #d3d4d5'}})(function(props){return/*#__PURE__*/_jsx(Menu,_objectSpread({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'}},props));});var StyledMenuItem=withStyles(function(){return{};})(MenuItem);var Navbar=function Navbar(){var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friendRequests=_useState2[0],setFriendRequests=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),pendingFriendRequests=_useState4[0],setPendingFriendRequests=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openUser=_useState6[0],setOpenUser=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),chatNotifications=_useState8[0],setChatNotifications=_useState8[1];var _useState9=useState({mobileView:false,drawerOpen:false}),_useState10=_slicedToArray(_useState9,2),state=_useState10[0],setState=_useState10[1];var mobileView=state.mobileView,drawerOpen=state.drawerOpen;useEffect(function(){var setResponsiveness=function setResponsiveness(){return window.innerWidth<951?setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{mobileView:true});}):setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{mobileView:false});});};setResponsiveness();window.addEventListener('resize',function(){return setResponsiveness();});},[]);useEffect(function(){axios.get(\"user/\".concat(localStorage.getItem('userID'))).then(function(response){console.log('notifications:');console.log(response);setChatNotifications(response.data['notifications']);}).catch(function(error){console.log(error.response.data);});},[]);var onChatNotificationClick=function onChatNotificationClick(activityId){axios.delete(\"user/\".concat(localStorage.getItem('userID'),\"/notification/\").concat(activityId)).then(function(){setChatNotifications(chatNotifications.filter(function(not){if(not.activityId!=activityId)return not;}));});};//const classes = useStyles();\nvar history=useHistory();var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),anchorChat=_React$useState4[0],setAnchorChat=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),anchorElProfile=_React$useState6[0],setAnchorElProfile=_React$useState6[1];var handleOpenMenu=function handleOpenMenu(event){setAnchorEl(event.currentTarget);};var handleCloseMenu=function handleCloseMenu(){setAnchorEl(null);};var handleOpenProfileMenu=function handleOpenProfileMenu(event){setAnchorElProfile(event.currentTarget);};var handleOpenChat=function handleOpenChat(event){setAnchorChat(event.currentTarget);};var handleCloseChatMenu=function handleCloseChatMenu(){setAnchorChat(null);};var handleCloseProfileMenu=function handleCloseProfileMenu(){setAnchorElProfile(null);};var changeToMap=function changeToMap(){history.push('/Map');};var changeToHomePage=function changeToHomePage(){history.push('/Activities');};var changeToLoginPage=function changeToLoginPage(){localStorage.clear();history.push('/');handleCloseProfileMenu();};var changeToLeaderboard=function changeToLeaderboard(){history.push('/Leaderboard');};var changeToCalender=function changeToCalender(){history.push('/Calendar');};var changeToGroupsAndFriends=function changeToGroupsAndFriends(){history.push('/GroupsAndFriends');};//henter alle pending *angre\nvar loadPending=function loadPending(){axios.get(\"/user/\".concat(localStorage.getItem('userID'),\"/pending\"),config).then(function(response){console.log('PendingVenneforespørsler:');console.log(response.data['users']);setPendingFriendRequests(response.data['users']);}).catch(function(error){return console.log(error);});};var loadRequest=function loadRequest(){//henter alle reqest ja/nei\nconsole.log(localStorage.getItem('userID'));axios.get(\"/user/\".concat(localStorage.getItem('userID'),\"/request\"),config).then(function(response){console.log('Venneforespørsler:');console.log(response.data['users']);setFriendRequests(response.data['users']);}).catch(function(error){return console.log(error);});};useEffect(function(){loadRequest();},[user]);//henter alle sendte venneforespørsler\nuseEffect(function(){loadPending();},[user]);var handleDrawerOpen=function handleDrawerOpen(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen:true});});};var handleDrawerClose=function handleDrawerClose(){return setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{drawerOpen:false});});};var declineRequest=function declineRequest(request){deleteFriend(Object.values(request)[0]);};var addFriend=function addFriend(request){postFriend(Object.values(request)[0]);};//godkjenner forespørsel\nvar postFriend=function postFriend(friendId){console.log(friendId);axios.post(\"/user/\".concat(localStorage.getItem('userID'),\"/user\"),{userId:localStorage.getItem('userID'),friendId:friendId},config).then(function(response){JSON.stringify(response);console.log(response.data);}).then(function(){loadPending();loadRequest();}).catch(function(error){console.log('Could not post friend: '+error.message);alert('Du er allerede venn med denne brukeren');});};//sletter forespørsel\nvar deleteFriend=function deleteFriend(friendId){axios.delete(\"user/\".concat(user,\"/user/\").concat(friendId),config).then(function(response){JSON.stringify(response);console.log(response.data);}).then(function(){loadPending();loadRequest();}).catch(function(error){return console.log('Could not delete friend: '+error.message);});};var getDefault=function getDefault(){if(friendRequests.length<1&&pendingFriendRequests.length<1){return/*#__PURE__*/_jsx(StyledMenuItem,{style:{whiteSpace:'normal',display:'block',textAlign:'center',width:'300px',fontSize:'15px'},onClick:handleCloseMenu,children:/*#__PURE__*/_jsx(\"b\",{style:{marginTop:'50px',paddingTop:'100px'},children:\"Du har ingen varsler\"})});}};var displayMobile=function displayMobile(){var getDrawerChoices=function getDrawerChoices(){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){changeToHomePage();handleDrawerClose();},children:[/*#__PURE__*/_jsx(DirectionsRunIcon,{}),\"Aktiviteter\"]}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){changeToMap();handleDrawerClose();},children:[/*#__PURE__*/_jsx(MapIcon,{}),\"Kart\"]}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){handleDrawerClose();changeToCalender();},children:[' ',/*#__PURE__*/_jsx(CalendarTodayIcon,{}),\" Kalender\"]}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){changeToGroupsAndFriends();handleDrawerClose();},children:[/*#__PURE__*/_jsx(PeopleIcon,{}),\"Grupper og venner\"]}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){changeToLeaderboard();handleDrawerClose();},children:[/*#__PURE__*/_jsx(EmojiEventsIcon,{}),\"Leaderboard\"]}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:function onClick(){setOpenUser(!openUser);handleDrawerClose();},children:[/*#__PURE__*/_jsx(AccountBoxIcon,{}),\"Min bruker\"]}),/*#__PURE__*/_jsx(Popup,{title:\"Min Bruker\",openPopup:openUser,setOpenPopup:setOpenUser,children:/*#__PURE__*/_jsx(MyUser,{openPopup:openUser,setOpenPopup:setOpenUser})}),/*#__PURE__*/_jsxs(Button,{style:{padding:'10px'},onClick:changeToLoginPage,children:[/*#__PURE__*/_jsx(ExitToAppIcon,{}),\"Logg ut\"]})]});};return/*#__PURE__*/_jsxs(Toolbar,{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"img\",{onClick:changeToHomePage,src:logo,style:{width:'50px',margin:'3px',cursor:'pointer'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"chatNotification\",\"aria-haspopup\":\"true\",onClick:handleOpenChat,children:/*#__PURE__*/_jsx(Badge,{badgeContent:chatNotifications.length,color:\"error\",children:/*#__PURE__*/_jsx(ChatIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"dropdownNotifications\",\"aria-haspopup\":\"true\",onClick:handleOpenMenu,children:/*#__PURE__*/_jsx(Badge,{badgeContent:pendingFriendRequests.length+friendRequests.length,color:\"error\",children:/*#__PURE__*/_jsx(NotificationsIcon,{})})})]}),/*#__PURE__*/_jsx(IconButton,{onClick:handleDrawerOpen,children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsxs(Drawer//variant=\"persistent\"\n,{anchor:'right',open:drawerOpen,onClose:handleDrawerClose,children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(IconButton,{style:{position:'absolute',top:'5px',right:'0'},onClick:handleDrawerClose,children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(\"b\",{style:{textAlign:'center'},children:\"Meny\"}),/*#__PURE__*/_jsx(Divider,{style:{marginTop:'20px'}}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px'},children:getDrawerChoices()})]})]});};var displayDesktop=function displayDesktop(){return/*#__PURE__*/_jsxs(Toolbar,{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"img\",{onClick:changeToHomePage,src:logo,style:{width:'50px',margin:'3px',cursor:'pointer'}}),/*#__PURE__*/_jsxs(Button,{onClick:changeToHomePage,children:[' ',/*#__PURE__*/_jsx(DirectionsRunIcon,{}),\"Aktiviteter\"]}),/*#__PURE__*/_jsxs(Button,{onClick:changeToMap,children:[/*#__PURE__*/_jsx(MapIcon,{}),\"Kart\"]}),/*#__PURE__*/_jsxs(Button,{onClick:changeToCalender,children:[' ',/*#__PURE__*/_jsx(CalendarTodayIcon,{}),\"Kalender\"]}),/*#__PURE__*/_jsxs(Button,{onClick:changeToGroupsAndFriends,children:[/*#__PURE__*/_jsx(PeopleIcon,{}),\"Grupper og venner\"]}),/*#__PURE__*/_jsxs(Button,{onClick:changeToLeaderboard,children:[/*#__PURE__*/_jsx(EmojiEventsIcon,{}),\"Leaderboard\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"chatNotification\",\"aria-haspopup\":\"true\",onClick:handleOpenChat,children:/*#__PURE__*/_jsx(Badge,{badgeContent:chatNotifications.length,color:\"error\",children:/*#__PURE__*/_jsx(ChatIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"dropdownNotifications\",\"aria-haspopup\":\"true\",onClick:handleOpenMenu,children:/*#__PURE__*/_jsx(Badge,{badgeContent:friendRequests.length+pendingFriendRequests.length,color:\"error\",children:/*#__PURE__*/_jsx(NotificationsIcon,{})})}),/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"dropdownProfile\",\"aria-haspopup\":\"true\",onClick:handleOpenProfileMenu,children:/*#__PURE__*/_jsx(AccountBoxIcon,{})})]})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",style:{display:'flex'},children:mobileView?displayMobile():displayDesktop()}),/*#__PURE__*/_jsx(ChatAlerts,{onItemClick:onChatNotificationClick,notifications:chatNotifications,onClose:handleCloseChatMenu,id:'chatNotification',anchorEl:anchorChat}),/*#__PURE__*/_jsxs(StyledMenu,{id:\"dropdownNotifications\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleCloseMenu,children:[getDefault(),friendRequests.map(function(request){return/*#__PURE__*/_jsxs(StyledMenuItem,{style:{whiteSpace:'normal',display:'block',textAlign:'center',width:'300px',fontSize:'15px'},onClick:handleCloseMenu,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Venneforesp\\xF8rsel fra:\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'2px'},children:request.firstName+' '+request.surname}),/*#__PURE__*/_jsx(IconButton,{style:{color:'green',marginTop:'-15px'},children:/*#__PURE__*/_jsx(CheckIcon,{onClick:function onClick(){return addFriend(request);}})}),/*#__PURE__*/_jsx(IconButton,{style:{color:'red',marginTop:'-15px'},children:/*#__PURE__*/_jsx(CloseIcon,{onClick:function onClick(){return declineRequest(request);}})})]}),/*#__PURE__*/_jsx(\"hr\",{})]},request.userId);}),pendingFriendRequests.map(function(pending){return/*#__PURE__*/_jsxs(StyledMenuItem,{style:{whiteSpace:'normal',display:'block',textAlign:'center',width:'300px',fontSize:'15px'},onClick:handleCloseMenu,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Du har sendt en venneforsp\\xF8rsel til:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'-5px'},children:[pending.firstName+' '+pending.surname,/*#__PURE__*/_jsx(IconButton,{style:{color:'red'},children:/*#__PURE__*/_jsx(CloseIcon,{onClick:function onClick(){return declineRequest(pending);}})})]})]}),/*#__PURE__*/_jsx(\"hr\",{})]},pending.userId);})]}),/*#__PURE__*/_jsxs(StyledMenu,{id:\"dropdownProfile\",anchorEl:anchorElProfile,keepMounted:true,open:Boolean(anchorElProfile),onClose:handleCloseProfileMenu,children:[/*#__PURE__*/_jsxs(StyledMenuItem,{onClick:function onClick(){return setOpenUser(!openUser);},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(AccountBoxIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Min bruker\"})]}),/*#__PURE__*/_jsx(Popup,{title:\"Min Bruker\",openPopup:openUser,setOpenPopup:setOpenUser,children:/*#__PURE__*/_jsx(MyUser,{openPopup:openUser,setOpenPopup:setOpenUser})}),/*#__PURE__*/_jsxs(StyledMenuItem,{onClick:changeToLoginPage,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ExitToAppIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Logg ut\"})]})]})]});};export default Navbar;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/components/NavBarComponents/NavBar.tsx"],"names":["AppBar","Button","Toolbar","MenuItem","Drawer","IconButton","React","useState","useEffect","useContext","useHistory","logo","ChatIcon","Menu","NotificationsIcon","AccountBoxIcon","withStyles","ListItemIcon","ListItemText","ExitToAppIcon","MenuIcon","CloseIcon","Divider","CalendarTodayIcon","MapIcon","PeopleIcon","EmojiEventsIcon","DirectionsRunIcon","Popup","MyUser","axios","UserContext","CheckIcon","Badge","ChatAlerts","config","StyledMenu","paper","border","props","vertical","horizontal","StyledMenuItem","Navbar","user","friendRequests","setFriendRequests","pendingFriendRequests","setPendingFriendRequests","openUser","setOpenUser","chatNotifications","setChatNotifications","mobileView","drawerOpen","state","setState","setResponsiveness","window","innerWidth","prevState","addEventListener","get","localStorage","getItem","then","response","console","log","data","catch","error","onChatNotificationClick","activityId","delete","filter","not","history","anchorEl","setAnchorEl","anchorChat","setAnchorChat","anchorElProfile","setAnchorElProfile","handleOpenMenu","event","currentTarget","handleCloseMenu","handleOpenProfileMenu","handleOpenChat","handleCloseChatMenu","handleCloseProfileMenu","changeToMap","push","changeToHomePage","changeToLoginPage","clear","changeToLeaderboard","changeToCalender","changeToGroupsAndFriends","loadPending","loadRequest","handleDrawerOpen","handleDrawerClose","declineRequest","request","deleteFriend","Object","values","addFriend","postFriend","friendId","post","userId","JSON","stringify","message","alert","getDefault","length","whiteSpace","display","textAlign","width","fontSize","marginTop","paddingTop","displayMobile","getDrawerChoices","flexDirection","justifyContent","padding","margin","cursor","anchor","open","onClose","position","top","right","displayDesktop","Boolean","map","firstName","surname","color","pending"],"mappings":"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","sourcesContent":["import {\n    AppBar,\n    Button,\n    Toolbar,\n    MenuItem,\n    Drawer,\n} from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport logo from '../../assets/logo.png';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport Menu, { MenuProps } from '@material-ui/core/Menu';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport { withStyles } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Divider from '@material-ui/core/Divider';\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\nimport MapIcon from '@material-ui/icons/Map';\nimport PeopleIcon from '@material-ui/icons/People';\nimport EmojiEventsIcon from '@material-ui/icons/EmojiEvents';\nimport DirectionsRunIcon from '@material-ui/icons/DirectionsRun';\nimport Popup from '../Popup';\nimport MyUser from '../MyUser';\nimport User from '../../interfaces/User';\nimport axios from '../../Axios';\nimport { UserContext } from '../../UserContext';\nimport CheckIcon from '@material-ui/icons/Check';\nimport Badge from '@material-ui/core/Badge';\nimport ChatAlerts from './ChatAlerts';\nimport ActivityResponse from '../../interfaces/ActivityResponse';\nimport config from '../../Config';\n\nconst StyledMenu = withStyles({\n    paper: {\n        border: '1px solid #d3d4d5',\n    },\n})((props: MenuProps) => (\n    <Menu\n        elevation={0}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n        }}\n        transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n        }}\n        {...props}\n    />\n));\n\nconst StyledMenuItem = withStyles(() => ({\n\n}))(MenuItem);\n\nconst Navbar = () => {\n    const { user } = useContext(UserContext);\n    const [friendRequests, setFriendRequests] = useState<User[]>([]);\n    const [pendingFriendRequests, setPendingFriendRequests] = useState<User[]>(\n        []\n    );\n    const [openUser, setOpenUser] = useState<boolean>(false);\n    const [chatNotifications, setChatNotifications] = useState<\n        ActivityResponse[]\n    >([]);\n    const [state, setState] = useState({\n        mobileView: false,\n        drawerOpen: false,\n    });\n    const { mobileView, drawerOpen } = state;\n    useEffect(() => {\n        const setResponsiveness = () => {\n            return window.innerWidth < 951\n                ? setState((prevState) => ({ ...prevState, mobileView: true }))\n                : setState((prevState) => ({\n                    ...prevState,\n                    mobileView: false,\n                }));\n        };\n        setResponsiveness();\n        window.addEventListener('resize', () => setResponsiveness());\n    }, []);\n\n    useEffect(() => {\n        axios.get(`user/${localStorage.getItem('userID')}`).then((response) => {\n            console.log('notifications:')\n            console.log(response)\n            setChatNotifications(response.data['notifications']);\n        }).catch(error => {\n            console.log(error.response.data)\n        });\n    }, []);\n\n    const onChatNotificationClick = (activityId: number) => {\n        axios\n            .delete(\n                `user/${localStorage.getItem(\n                    'userID'\n                )}/notification/${activityId}`\n            )\n            .then(() => {\n                setChatNotifications(\n                    chatNotifications.filter((not) => {\n                        if (not.activityId != activityId) return not;\n                    })\n                );\n            });\n    };\n\n    //const classes = useStyles();\n    const history = useHistory();\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const [anchorChat, setAnchorChat] = React.useState<null | HTMLElement>(\n        null\n    );\n\n    const [\n        anchorElProfile,\n        setAnchorElProfile,\n    ] = React.useState<null | HTMLElement>(null);\n\n    const handleOpenMenu = (event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleCloseMenu = () => {\n        setAnchorEl(null);\n    };\n\n    const handleOpenProfileMenu = (event: React.MouseEvent<HTMLElement>) => {\n        setAnchorElProfile(event.currentTarget);\n    };\n\n    const handleOpenChat = (event: React.MouseEvent<HTMLElement>) => {\n        setAnchorChat(event.currentTarget);\n    };\n\n    const handleCloseChatMenu = () => {\n        setAnchorChat(null);\n    };\n\n    const handleCloseProfileMenu = () => {\n        setAnchorElProfile(null);\n    };\n\n    const changeToMap = () => {\n        history.push('/Map');\n    };\n\n    const changeToHomePage = () => {\n        history.push('/Activities');\n    };\n\n\n    const changeToLoginPage = () => {\n        localStorage.clear();\n        history.push('/');\n        handleCloseProfileMenu();\n    };\n\n    const changeToLeaderboard = () => {\n        history.push('/Leaderboard');\n    };\n\n    const changeToCalender = () => {\n        history.push('/Calendar');\n    };\n\n    const changeToGroupsAndFriends = () => {\n        history.push('/GroupsAndFriends');\n    };\n\n    //henter alle pending *angre\n    const loadPending = () => {\n        axios\n            .get(`/user/${localStorage.getItem('userID')}/pending`, config)\n            .then((response) => {\n                console.log('PendingVenneforespørsler:');\n                console.log(response.data['users']);\n                setPendingFriendRequests(response.data['users']);\n            })\n            .catch((error) => console.log(error));\n    };\n    const loadRequest = () => {\n        //henter alle reqest ja/nei\n        console.log(localStorage.getItem('userID'));\n        axios\n            .get(`/user/${localStorage.getItem('userID')}/request`, config)\n            .then((response) => {\n                console.log('Venneforespørsler:');\n                console.log(response.data['users']);\n                setFriendRequests(response.data['users']);\n            })\n            .catch((error) => console.log(error));\n    };\n\n    useEffect(() => {\n        loadRequest();\n    }, [user]);\n\n    //henter alle sendte venneforespørsler\n    useEffect(() => {\n        loadPending();\n    }, [user]);\n\n    const handleDrawerOpen = () =>\n        setState((prevState) => ({ ...prevState, drawerOpen: true }));\n\n    const handleDrawerClose = () =>\n        setState((prevState) => ({ ...prevState, drawerOpen: false }));\n\n    const declineRequest = (request: User) => {\n        deleteFriend(Object.values(request)[0]);\n    };\n\n    const addFriend = (request: User) => {\n        postFriend(Object.values(request)[0]);\n    };\n    //godkjenner forespørsel\n    const postFriend = (friendId: string) => {\n        console.log(friendId);\n        axios\n            .post(`/user/${localStorage.getItem('userID')}/user`, {\n                userId: localStorage.getItem('userID'),\n                friendId: friendId,\n            }, config)\n            .then((response) => {\n                JSON.stringify(response);\n                console.log(response.data);\n            })\n            .then(() => {\n                loadPending();\n                loadRequest();\n            })\n            .catch((error) => {\n                console.log('Could not post friend: ' + error.message);\n                alert('Du er allerede venn med denne brukeren');\n            });\n    };\n    //sletter forespørsel\n    const deleteFriend = (friendId: string) => {\n        axios\n            .delete(`user/${user}/user/${friendId}`, config)\n            .then((response) => {\n                JSON.stringify(response);\n                console.log(response.data);\n            })\n            .then(() => {\n                loadPending();\n                loadRequest();\n            })\n            .catch((error) =>\n                console.log('Could not delete friend: ' + error.message)\n            );\n    };\n\n    const getDefault = () => {\n        if (friendRequests.length < 1 && pendingFriendRequests.length < 1) {\n            return (\n                <StyledMenuItem\n                    style={{\n                        whiteSpace: 'normal',\n                        display: 'block',\n                        textAlign: 'center',\n                        width: '300px',\n                        fontSize: '15px',\n                    }}\n                    onClick={handleCloseMenu}\n                >\n                    <b style={{ marginTop: '50px', paddingTop: '100px' }}>\n                        Du har ingen varsler\n                    </b>\n                </StyledMenuItem>\n            );\n        }\n    };\n\n    const displayMobile = () => {\n        const getDrawerChoices = () => {\n            return (\n                <div\n                    style={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        justifyContent: 'space-between',\n                    }}\n                >\n                    <br />\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            changeToHomePage();\n                            handleDrawerClose();\n                        }}\n                    >\n                        <DirectionsRunIcon />\n                        Aktiviteter\n                    </Button>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            changeToMap();\n                            handleDrawerClose();\n                        }}\n                    >\n                        <MapIcon />\n                        Kart\n                    </Button>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            handleDrawerClose();\n                            changeToCalender();\n                        }}\n                    >\n                        {' '}\n                        <CalendarTodayIcon /> Kalender\n                    </Button>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            changeToGroupsAndFriends();\n                            handleDrawerClose();\n                        }}\n                    >\n                        <PeopleIcon />\n                        Grupper og venner\n                    </Button>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            changeToLeaderboard();\n                            handleDrawerClose();\n                        }}\n                    >\n                        <EmojiEventsIcon />\n                        Leaderboard\n                    </Button>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={() => {\n                            setOpenUser(!openUser);\n                            handleDrawerClose();\n                        }}\n                    >\n                        <AccountBoxIcon />\n                        Min bruker\n                    </Button>\n                    <Popup\n                        title=\"Min Bruker\"\n                        openPopup={openUser}\n                        setOpenPopup={setOpenUser}\n                    >\n                        <MyUser\n                            openPopup={openUser}\n                            setOpenPopup={setOpenUser}\n                        />\n                    </Popup>\n                    <Button\n                        style={{ padding: '10px' }}\n                        onClick={changeToLoginPage}\n                    >\n                        <ExitToAppIcon />\n                        Logg ut\n                    </Button>\n                </div>\n            );\n        };\n\n        return (\n            <Toolbar\n                style={{ display: 'flex', justifyContent: 'space-between' }}\n            >\n                <img\n                    onClick={changeToHomePage}\n                    src={logo}\n                    style={{\n                        width: '50px',\n                        margin: '3px',\n                        cursor: 'pointer',\n                    }}\n                />\n                <div>\n                    <IconButton\n                        aria-controls=\"chatNotification\"\n                        aria-haspopup=\"true\"\n                        onClick={handleOpenChat}\n                    >\n                        <Badge\n                            badgeContent={chatNotifications.length}\n                            color=\"error\"\n                        >\n                            <ChatIcon />\n                        </Badge>\n                    </IconButton>\n                    <IconButton\n                        aria-controls=\"dropdownNotifications\"\n                        aria-haspopup=\"true\"\n                        onClick={handleOpenMenu}\n                    >\n                        <Badge\n                            badgeContent={\n                                pendingFriendRequests.length +\n                                friendRequests.length\n                            }\n                            color=\"error\"\n                        >\n                            <NotificationsIcon />\n                        </Badge>\n                    </IconButton>\n                </div>\n                <IconButton onClick={handleDrawerOpen}>\n                    <MenuIcon />\n                </IconButton>\n                <Drawer\n                    //variant=\"persistent\"\n                    {...{\n                        anchor: 'right',\n                        open: drawerOpen,\n                        onClose: handleDrawerClose,\n                    }}\n                >\n                    <br />\n                    <IconButton\n                        style={{\n                            position: 'absolute',\n                            top: '5px',\n                            right: '0',\n                        }}\n                        onClick={handleDrawerClose}\n                    >\n                        <CloseIcon />\n                    </IconButton>\n                    <b style={{ textAlign: 'center' }}>Meny</b>\n                    <Divider\n                        style={{\n                            marginTop: '20px',\n                        }}\n                    />\n                    <div style={{ padding: '10px' }}>{getDrawerChoices()}</div>\n                </Drawer>\n            </Toolbar>\n        );\n    };\n    const displayDesktop = () => {\n        return (\n            <Toolbar\n                style={{ display: 'flex', justifyContent: 'space-between' }}\n            >\n                <img\n                    onClick={changeToHomePage}\n                    src={logo}\n                    style={{\n                        width: '50px',\n                        margin: '3px',\n                        cursor: 'pointer',\n                    }}\n                />\n                <Button onClick={changeToHomePage}>\n                    {' '}\n                    <DirectionsRunIcon />\n                    Aktiviteter\n                </Button>\n                <Button onClick={changeToMap}>\n                    <MapIcon />\n                    Kart\n                </Button>\n                <Button onClick={changeToCalender}>\n                    {' '}\n                    <CalendarTodayIcon />\n                    Kalender\n                </Button>\n                <Button onClick={changeToGroupsAndFriends}>\n                    <PeopleIcon />\n                    Grupper og venner\n                </Button>\n                <Button onClick={changeToLeaderboard}>\n                    <EmojiEventsIcon />\n                    Leaderboard\n                </Button>\n                <div>\n                    <IconButton\n                        aria-controls=\"chatNotification\"\n                        aria-haspopup=\"true\"\n                        onClick={handleOpenChat}\n                    >\n                        <Badge\n                            badgeContent={chatNotifications.length}\n                            color=\"error\"\n                        >\n                            <ChatIcon />\n                        </Badge>\n                    </IconButton>\n                    <IconButton\n                        aria-controls=\"dropdownNotifications\"\n                        aria-haspopup=\"true\"\n                        onClick={handleOpenMenu}\n                    >\n                        <Badge\n                            badgeContent={\n                                friendRequests.length +\n                                pendingFriendRequests.length\n                            }\n                            color=\"error\"\n                        >\n                            <NotificationsIcon />\n                        </Badge>\n                    </IconButton>\n                    <IconButton\n                        aria-controls=\"dropdownProfile\"\n                        aria-haspopup=\"true\"\n                        onClick={handleOpenProfileMenu}\n                    >\n                        <AccountBoxIcon />\n                    </IconButton>\n                </div>\n            </Toolbar>\n        );\n    };\n\n    return (\n        <div>\n            <AppBar position=\"static\" style={{ display: 'flex' }}>\n                {mobileView ? displayMobile() : displayDesktop()}\n            </AppBar>\n            <ChatAlerts\n                onItemClick={onChatNotificationClick}\n                notifications={chatNotifications}\n                onClose={handleCloseChatMenu}\n                id={'chatNotification'}\n                anchorEl={anchorChat}\n            ></ChatAlerts>\n\n            <StyledMenu\n                id=\"dropdownNotifications\"\n                anchorEl={anchorEl}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleCloseMenu}\n            >\n                {getDefault()}\n\n                {friendRequests.map((request: User) => {\n                    return (\n                        <StyledMenuItem\n                            style={{\n                                whiteSpace: 'normal',\n                                display: 'block',\n                                textAlign: 'center',\n                                width: '300px',\n                                fontSize: '15px',\n                            }}\n                            key={request.userId}\n                            onClick={handleCloseMenu}\n                        >\n                            <div>\n                                <b>Venneforespørsel fra:</b>\n                                <p style={{ marginTop: '2px' }}>\n                                    {request.firstName + ' ' + request.surname}\n                                </p>\n                                <IconButton\n                                    style={{\n                                        color: 'green',\n                                        marginTop: '-15px',\n                                    }}\n                                >\n                                    <CheckIcon\n                                        onClick={() => addFriend(request)}\n                                    />\n                                </IconButton>\n                                <IconButton\n                                    style={{ color: 'red', marginTop: '-15px' }}\n                                >\n                                    <CloseIcon\n                                        onClick={() => declineRequest(request)}\n                                    />\n                                </IconButton>\n                            </div>\n                            <hr />\n                        </StyledMenuItem>\n                    );\n                })}\n\n                {pendingFriendRequests.map((pending: User) => {\n                    return (\n                        <StyledMenuItem\n                            style={{\n                                whiteSpace: 'normal',\n                                display: 'block',\n                                textAlign: 'center',\n                                width: '300px',\n                                fontSize: '15px',\n                            }}\n                            key={pending.userId}\n                            onClick={handleCloseMenu}\n                        >\n                            <div>\n                                <b>Du har sendt en venneforspørsel til:</b>\n                                <p style={{ marginTop: '-5px' }}>\n                                    {pending.firstName + ' ' + pending.surname}\n                                    <IconButton style={{ color: 'red' }}>\n                                        <CloseIcon\n                                            onClick={() =>\n                                                declineRequest(pending)\n                                            }\n                                        />\n                                    </IconButton>\n                                </p>\n                            </div>\n                            <hr />\n                        </StyledMenuItem>\n                    );\n                })}\n            </StyledMenu>\n\n            <StyledMenu\n                id=\"dropdownProfile\"\n                anchorEl={anchorElProfile}\n                keepMounted\n                open={Boolean(anchorElProfile)}\n                onClose={handleCloseProfileMenu}\n            >\n                <StyledMenuItem onClick={() => setOpenUser(!openUser)}>\n                    <ListItemIcon>\n                        <AccountBoxIcon fontSize=\"small\" />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Min bruker\" />\n                </StyledMenuItem>\n                <Popup\n                    title=\"Min Bruker\"\n                    openPopup={openUser}\n                    setOpenPopup={setOpenUser}\n                >\n                    <MyUser openPopup={openUser} setOpenPopup={setOpenUser} />\n                </Popup>\n                <StyledMenuItem onClick={changeToLoginPage}>\n                    <ListItemIcon>\n                        <ExitToAppIcon fontSize=\"small\" />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Logg ut\" />\n                </StyledMenuItem>\n            </StyledMenu>\n        </div>\n    );\n};\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}