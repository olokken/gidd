{"ast":null,"code":"import { createElement, Fragment, PureComponent, Component } from 'react';\nimport classnames from 'classnames';\nimport debounce from 'lodash.debounce';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n/* istanbul ignore next */\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type, @typescript-eslint/no-empty-function */\n\n/**\r\n * Default values\r\n */\n\n\nvar defaults = {\n  autoActivateFirstSuggest: false,\n  disabled: false,\n  fixtures: [],\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getSuggestLabel: function (suggest) {\n    return suggest.description;\n  },\n  highlightMatch: true,\n  ignoreEnter: false,\n  ignoreTab: false,\n  initialValue: '',\n  maxFixtures: 10,\n  minLength: 1,\n  onKeyDown: function () {},\n  onKeyPress: function () {},\n  placeholder: 'Search places',\n  queryDelay: 250,\n  skipSuggest: function () {\n    return false;\n  },\n  style: {},\n  inputType: 'text'\n};\n/**\r\n * Attributes allowed on input elements\r\n */\n\nvar allowedAttributes = ['autoCapitalize', 'autoComplete', 'autoCorrect', 'autoFocus', 'disabled', 'form', 'formAction', 'formEncType', 'formMethod', 'formNoValidate', 'formTarget', 'height', 'inputMode', 'maxLength', 'name', 'onClick', 'onContextMenu', 'onCopy', 'onCut', 'onDoubleClick', 'onMouseDown', 'onMouseEnter', 'onMouseLeave', 'onMouseMove', 'onMouseOut', 'onMouseOver', 'onMouseUp', 'onPaste', 'pattern', 'placeholder', 'readOnly', 'required', 'size', 'spellCheck', 'tabIndex', 'title', 'aria-atomic', 'aria-busy', 'aria-controls', 'aria-current', 'aria-describedby', 'aria-details', 'aria-disabled', 'aria-dropeffect', 'aria-errormessage', 'aria-flowto', 'aria-grabbed', 'aria-haspopup', 'aria-hidden', 'aria-invalid', 'aria-keyshortcuts', 'aria-label', 'aria-labelledby', 'aria-live', 'aria-owns', 'aria-relevant', 'aria-roledescription', 'aria-activedescendant', 'aria-autocomplete', 'aria-multiline', 'aria-placeholder', 'aria-readonly', 'aria-required'];\n/**\r\n * Filter the properties for only allowed input properties\r\n */\n\nfunction filterInputAttributes(props) {\n  var attributes = {};\n  Object.keys(props).forEach(function (attribute) {\n    var isDataAttribute = attribute.startsWith('data-');\n    var isAllowedAttribute = allowedAttributes.includes(attribute);\n\n    if (isAllowedAttribute || isDataAttribute) {\n      attributes[attribute] = props[attribute];\n    }\n  });\n  return attributes;\n}\n/**\r\n * The input field\r\n */\n\n\nvar Input =\n/** @class */\nfunction (_super) {\n  __extends(Input, _super);\n  /**\r\n   * The constructor.\r\n   */\n\n\n  function Input(props) {\n    var _this = _super.call(this, props) || this;\n    /* eslint-enable @typescript-eslint/no-empty-function */\n\n    /**\r\n     * The reference to the input element\r\n     */\n\n\n    _this.input = null;\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onInputKeyDown = _this.onInputKeyDown.bind(_this);\n    return _this;\n  }\n  /**\r\n   * When the input got changed\r\n   */\n\n\n  Input.prototype.onChange = function () {\n    if (this.input) {\n      this.props.onChange(this.input.value);\n    }\n  };\n  /**\r\n   * When a key gets pressed in the input\r\n   */\n  // eslint-disable-next-line complexity\n\n\n  Input.prototype.onInputKeyDown = function (event) {\n    // Call props.onKeyDown if defined\n    // Gives the developer a little bit more control if needed\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(event);\n    }\n\n    switch (event.which) {\n      case 40:\n        // DOWN\n        if (!event.shiftKey) {\n          event.preventDefault();\n          this.props.onNext();\n        }\n\n        break;\n\n      case 38:\n        // UP\n        if (!event.shiftKey) {\n          event.preventDefault();\n          this.props.onPrev();\n        }\n\n        break;\n\n      case 13:\n        // ENTER\n        if (this.props.doNotSubmitOnEnter) {\n          event.preventDefault();\n        }\n\n        if (!this.props.ignoreEnter) {\n          this.props.onSelect();\n        }\n\n        break;\n\n      case 9:\n        // TAB\n        if (!this.props.ignoreTab) {\n          this.props.onSelect();\n        }\n\n        break;\n\n      case 27:\n        // ESC\n        this.props.onEscape();\n        break;\n    }\n  };\n  /**\r\n   * Focus the input\r\n   */\n\n\n  Input.prototype.focus = function () {\n    if (this.input) {\n      this.input.focus();\n    }\n  };\n  /**\r\n   * Blur the input\r\n   */\n\n\n  Input.prototype.blur = function () {\n    if (this.input) {\n      this.input.blur();\n    }\n  };\n  /**\r\n   * Render the view\r\n   */\n\n\n  Input.prototype.render = function () {\n    var _this = this;\n\n    var attributes = filterInputAttributes(this.props);\n    var classes = classnames('geosuggest__input', this.props.className);\n    var shouldRenderLabel = this.props.label && this.props.id;\n\n    if (!attributes.tabIndex) {\n      attributes.tabIndex = 0;\n    }\n\n    return createElement(Fragment, null, shouldRenderLabel && createElement(\"label\", {\n      className: \"geosuggest__label\",\n      htmlFor: this.props.id\n    }, this.props.label), createElement(\"input\", __assign({\n      className: classes,\n      id: \"geosuggest__input\" + (this.props.id ? \"--\" + this.props.id : ''),\n      ref: function (i) {\n        return _this.input = i;\n      },\n      type: this.props.inputType\n    }, attributes, {\n      value: this.props.value,\n      style: this.props.style,\n      onKeyDown: this.onInputKeyDown,\n      onChange: this.onChange,\n      onKeyPress: this.props.onKeyPress,\n      onFocus: this.props.onFocus,\n      onBlur: this.props.onBlur,\n      role: \"combobox\",\n      \"aria-expanded\": !this.props.isSuggestsHidden,\n      \"aria-activedescendant\": this.props.activeSuggest ? this.props.activeSuggest.placeId : // eslint-disable-next-line no-undefined\n      undefined,\n      \"aria-owns\": this.props.listId\n    })));\n  };\n  /* eslint-disable @typescript-eslint/no-empty-function */\n\n  /**\r\n   * Default values for the properties\r\n   */\n\n\n  Input.defaultProps = {\n    activeSuggest: null,\n    autoComplete: 'nope',\n    className: '',\n    isSuggestsHidden: true,\n    listId: '',\n    inputType: 'text',\n    onBlur: function () {},\n    onChange: function () {},\n    onEscape: function () {},\n    onFocus: function () {},\n    onKeyDown: function () {},\n    onKeyPress: function () {},\n    onNext: function () {},\n    onPrev: function () {},\n    onSelect: function () {},\n    value: ''\n  };\n  return Input;\n}(PureComponent);\n/**\r\n * A single Geosuggest item in the list\r\n */\n\n\nvar default_1 =\n/** @class */\nfunction (_super) {\n  __extends(default_1, _super);\n  /**\r\n   * The constructor.\r\n   */\n\n\n  function default_1(props) {\n    var _this = _super.call(this, props) || this;\n    /**\r\n     * The reference to the suggest element\r\n     */\n\n\n    _this.ref = null;\n    _this.onClick = _this.onClick.bind(_this);\n    return _this;\n  }\n  /**\r\n   * Makes a text bold\r\n   */\n\n\n  default_1.prototype.makeBold = function (element, key) {\n    return createElement(\"b\", {\n      className: \"geosuggest__item__matched-text\",\n      key: key\n    }, element);\n  };\n  /**\r\n   * Replace matched text with the same in bold\r\n   */\n\n\n  default_1.prototype.formatMatchedText = function (userInput, suggest) {\n    if (!userInput || !suggest.matchedSubstrings) {\n      return suggest.label;\n    }\n\n    var start = suggest.matchedSubstrings.offset;\n    var length = suggest.matchedSubstrings.length;\n    var end = start + length;\n    var boldPart = this.makeBold(suggest.label.substring(start, end), suggest.label);\n    var pre = '';\n    var post = '';\n\n    if (start > 0) {\n      pre = suggest.label.slice(0, start);\n    }\n\n    if (end < suggest.label.length) {\n      post = suggest.label.slice(end);\n    }\n\n    return createElement(\"span\", null, pre, boldPart, post);\n  };\n  /**\r\n   * Checking if item just became active and scrolling if needed.\r\n   */\n\n\n  default_1.prototype.componentDidUpdate = function (prevProps) {\n    if (!prevProps.isActive && this.props.isActive) {\n      this.scrollIfNeeded();\n    }\n  };\n  /**\r\n   * Scrolling current item to the center of the list if item needs scrolling.\r\n   * Item is scrolled to the center of the list.\r\n   */\n\n\n  default_1.prototype.scrollIfNeeded = function () {\n    var element = this.ref;\n    var parent = element && element.parentElement;\n\n    if (!element || !parent) {\n      return;\n    }\n\n    var overTop = element.offsetTop - parent.offsetTop < parent.scrollTop;\n    var overBottom = element.offsetTop - parent.offsetTop + element.clientHeight > parent.scrollTop + parent.clientHeight;\n\n    if (overTop || overBottom) {\n      parent.scrollTop = element.offsetTop - parent.offsetTop - parent.clientHeight / 2 + element.clientHeight / 2;\n    }\n  };\n  /**\r\n   * When the suggest item got clicked\r\n   */\n\n\n  default_1.prototype.onClick = function (event) {\n    event.preventDefault();\n    this.props.onSelect(this.props.suggest);\n  };\n  /**\r\n   * Render the view\r\n   */\n\n\n  default_1.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var suggest = this.props.suggest;\n    var classes = classnames('geosuggest__item', this.props.className, this.props.suggestItemClassName, {\n      'geosuggest__item--active': this.props.isActive\n    }, (_a = {}, _a[this.props.activeClassName || ''] = this.props.activeClassName ? this.props.isActive : null, _a));\n    var content = suggest.label;\n\n    if (this.props.renderSuggestItem) {\n      content = this.props.renderSuggestItem(suggest, this.props.userInput);\n    } else if (this.props.isHighlightMatch) {\n      content = this.formatMatchedText(this.props.userInput, suggest);\n    }\n\n    return createElement(\"li\", {\n      className: classes,\n      ref: function (li) {\n        return _this.ref = li;\n      },\n      style: this.props.style,\n      onMouseDown: this.props.onMouseDown,\n      onMouseOut: this.props.onMouseOut,\n      onClick: this.onClick,\n      role: \"option\",\n      \"aria-selected\": this.props.isActive,\n      id: suggest.placeId\n    }, content);\n  };\n\n  return default_1;\n}(PureComponent);\n/**\r\n * The list with suggestions.\r\n */\n\n\nvar default_1$1 =\n/** @class */\nfunction (_super) {\n  __extends(default_1$1, _super);\n\n  function default_1$1() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * Whether or not it is hidden\r\n   */\n\n\n  default_1$1.prototype.isHidden = function () {\n    return this.props.isHidden || this.props.suggests.length === 0;\n  };\n  /**\r\n   * There are new properties available for the list\r\n   */\n\n\n  default_1$1.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.suggests !== this.props.suggests) {\n      if (this.props.suggests.length === 0) {\n        this.props.onSuggestNoResults();\n      }\n    }\n  };\n  /**\r\n   * Render the view\r\n   * @return {Function} The React element to render\r\n   */\n\n\n  default_1$1.prototype.render = function () {\n    var _a;\n\n    var _this = this;\n\n    var classes = classnames('geosuggest__suggests', this.props.suggestsClassName, {\n      'geosuggest__suggests--hidden': this.isHidden()\n    }, (_a = {}, _a[this.props.hiddenClassName || ''] = this.props.hiddenClassName ? this.isHidden() : null, _a));\n    return createElement(\"ul\", {\n      className: classes,\n      style: this.props.style,\n      role: \"listbox\",\n      id: this.props.listId\n    }, this.props.suggests.map(function (suggest) {\n      var isActive = _this.props.activeSuggest && suggest.placeId === _this.props.activeSuggest.placeId || false;\n      return createElement(default_1, {\n        key: suggest.placeId,\n        className: suggest.className || '',\n        userInput: _this.props.userInput,\n        isHighlightMatch: _this.props.isHighlightMatch,\n        suggest: suggest,\n        style: _this.props.suggestItemStyle,\n        suggestItemClassName: _this.props.suggestItemClassName,\n        isActive: isActive,\n        activeClassName: _this.props.suggestItemActiveClassName,\n        onMouseDown: _this.props.onSuggestMouseDown,\n        onMouseOut: _this.props.onSuggestMouseOut,\n        onSelect: _this.props.onSuggestSelect,\n        renderSuggestItem: _this.props.renderSuggestItem\n      });\n    }));\n  };\n\n  return default_1$1;\n}(PureComponent);\n/* global window */\n// Escapes special characters in user input for regex\n\n\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n/**\r\n * Entry point for the Geosuggest component\r\n */\n\n\nvar default_1$2 =\n/** @class */\nfunction (_super) {\n  __extends(default_1, _super);\n  /**\r\n   * The constructor. Sets the initial state.\r\n   */\n  // eslint-disable-next-line max-statements\n\n\n  function default_1(props) {\n    var _this = _super.call(this, props) || this;\n    /**\r\n     * The Google Map instance\r\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    _this.googleMaps = null;\n    /**\r\n     * The autocomple service to get suggests\r\n     */\n\n    _this.autocompleteService = null;\n    /**\r\n     * The places service to get place details\r\n     */\n\n    _this.placesService = null;\n    /**\r\n     * The sessionToken service to use session based monetization\r\n     */\n\n    _this.sessionToken = undefined;\n    /**\r\n     * The geocoder to get geocoded results\r\n     */\n\n    _this.geocoder = null;\n    /**\r\n     * The input component\r\n     */\n\n    _this.input = null;\n    _this.state = {\n      activeSuggest: null,\n      ignoreBlur: false,\n      isLoading: false,\n      isSuggestsHidden: true,\n      suggests: [],\n      userInput: props.initialValue || ''\n    };\n    _this.onInputChange = _this.onInputChange.bind(_this);\n    _this.onAfterInputChange = _this.onAfterInputChange.bind(_this);\n    _this.onInputFocus = _this.onInputFocus.bind(_this);\n    _this.onInputBlur = _this.onInputBlur.bind(_this);\n    _this.onNext = _this.onNext.bind(_this);\n    _this.onPrev = _this.onPrev.bind(_this);\n    _this.onSelect = _this.onSelect.bind(_this);\n    _this.onSuggestMouseDown = _this.onSuggestMouseDown.bind(_this);\n    _this.onSuggestMouseOut = _this.onSuggestMouseOut.bind(_this);\n    _this.onSuggestNoResults = _this.onSuggestNoResults.bind(_this);\n    _this.hideSuggests = _this.hideSuggests.bind(_this);\n    _this.selectSuggest = _this.selectSuggest.bind(_this);\n    _this.listId = \"geosuggest__list\" + (props.id ? \"--\" + props.id : '');\n\n    if (props.queryDelay) {\n      _this.onAfterInputChange = debounce(_this.onAfterInputChange, props.queryDelay);\n    }\n\n    return _this;\n  }\n  /**\r\n   * Change inputValue if prop changes\r\n   */\n\n\n  default_1.prototype.componentDidUpdate = function (prevProps) {\n    if (prevProps.initialValue !== this.props.initialValue) {\n      this.setState({\n        userInput: this.props.initialValue || ''\n      });\n    }\n\n    if (JSON.stringify(prevProps.fixtures) !== JSON.stringify(this.props.fixtures)) {\n      this.searchSuggests();\n    }\n  };\n  /**\r\n   * Called on the client side after component is mounted.\r\n   * Google api sdk object will be obtained and cached as a instance property.\r\n   * Necessary objects of google api will also be determined and saved.\r\n   */\n\n\n  default_1.prototype.componentDidMount = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    var googleMaps = this.props.googleMaps || // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    window.google && window.google.maps || this.googleMaps;\n    /* istanbul ignore next */\n\n    if (!googleMaps) {\n      if (console) {\n        // eslint-disable-next-line no-console\n        console.error('Google maps API was not found in the page.');\n      }\n\n      return;\n    }\n\n    this.googleMaps = googleMaps;\n    this.autocompleteService = new googleMaps.places.AutocompleteService();\n    this.placesService = new googleMaps.places.PlacesService(document.createElement('div'));\n    this.sessionToken = new googleMaps.places.AutocompleteSessionToken();\n    this.geocoder = new googleMaps.Geocoder();\n  };\n  /**\r\n   * When the component will unmount\r\n   */\n\n\n  default_1.prototype.componentWillUnmount = function () {\n    clearTimeout(this.timer);\n  };\n  /**\r\n   * When the input changed\r\n   */\n\n\n  default_1.prototype.onInputChange = function (userInput) {\n    if (!userInput) {\n      if (this.props.onSuggestSelect) {\n        this.props.onSuggestSelect();\n      }\n    }\n\n    this.setState({\n      userInput: userInput\n    }, this.onAfterInputChange);\n  };\n  /**\r\n   * On After the input got changed\r\n   */\n\n\n  default_1.prototype.onAfterInputChange = function () {\n    this.showSuggests();\n\n    if (this.props.onChange) {\n      this.props.onChange(this.state.userInput);\n    }\n  };\n  /**\r\n   * When the input gets focused\r\n   */\n\n\n  default_1.prototype.onInputFocus = function () {\n    if (this.props.onFocus) {\n      this.props.onFocus();\n    }\n\n    this.showSuggests();\n  };\n  /**\r\n   * When the input gets blurred\r\n   */\n\n\n  default_1.prototype.onInputBlur = function () {\n    if (!this.state.ignoreBlur) {\n      this.hideSuggests();\n    }\n  };\n\n  default_1.prototype.onNext = function () {\n    this.activateSuggest('next');\n  };\n\n  default_1.prototype.onPrev = function () {\n    this.activateSuggest('prev');\n  };\n\n  default_1.prototype.onSelect = function () {\n    this.selectSuggest(this.state.activeSuggest);\n  };\n\n  default_1.prototype.onSuggestMouseDown = function () {\n    this.setState({\n      ignoreBlur: true\n    });\n  };\n\n  default_1.prototype.onSuggestMouseOut = function () {\n    this.setState({\n      ignoreBlur: false\n    });\n  };\n\n  default_1.prototype.onSuggestNoResults = function () {\n    if (this.props.onSuggestNoResults) {\n      this.props.onSuggestNoResults(this.state.userInput);\n    }\n  };\n  /**\r\n   * Focus the input\r\n   */\n\n\n  default_1.prototype.focus = function () {\n    if (this.input) {\n      this.input.focus();\n    }\n  };\n  /**\r\n   * Blur the input\r\n   */\n\n\n  default_1.prototype.blur = function () {\n    if (this.input) {\n      this.input.blur();\n    }\n  };\n  /**\r\n   * Update the value of the user input\r\n   */\n\n\n  default_1.prototype.update = function (userInput) {\n    this.setState({\n      userInput: userInput\n    });\n\n    if (this.props.onChange) {\n      this.props.onChange(userInput);\n    }\n  };\n  /*\r\n   * Clear the input and close the suggestion pane\r\n   */\n\n\n  default_1.prototype.clear = function () {\n    this.setState({\n      userInput: ''\n    }, this.hideSuggests);\n  };\n  /**\r\n   * Search for new suggests\r\n   */\n  // eslint-disable-next-line complexity, max-statements\n\n\n  default_1.prototype.searchSuggests = function () {\n    var _this = this;\n\n    if (!this.state.userInput) {\n      this.updateSuggests();\n      return;\n    }\n\n    var options = {\n      input: this.state.userInput,\n      sessionToken: this.sessionToken\n    };\n    var inputLength = this.state.userInput.length;\n    var isShorterThanMinLength = this.props.minLength && inputLength < this.props.minLength;\n\n    if (isShorterThanMinLength) {\n      this.updateSuggests();\n      return;\n    }\n\n    var _a = this.props,\n        location = _a.location,\n        radius = _a.radius,\n        bounds = _a.bounds,\n        types = _a.types,\n        country = _a.country;\n    /* eslint-disable curly */\n\n    if (location) options.location = location;\n    if (radius) options.radius = Number(this.props.radius);\n    if (bounds) options.bounds = bounds;\n    if (types) options.types = types;\n    if (country) options.componentRestrictions = {\n      country: country\n    };\n    /* eslint-enable curly */\n\n    this.setState({\n      isLoading: true\n    }, function () {\n      if (!_this.autocompleteService) {\n        _this.setState({\n          isLoading: false\n        });\n\n        return;\n      }\n\n      _this.autocompleteService.getPlacePredictions(options, function (suggestsGoogle) {\n        _this.setState({\n          isLoading: false\n        });\n\n        _this.updateSuggests(suggestsGoogle || [], // can be null\n        function () {\n          if (_this.props.autoActivateFirstSuggest && !_this.state.activeSuggest) {\n            _this.activateSuggest('next');\n          }\n        });\n      });\n    });\n  };\n  /**\r\n   * Update the suggests\r\n   */\n\n\n  default_1.prototype.updateSuggests = function (suggestsGoogle, // eslint-disable-next-line @typescript-eslint/explicit-function-return-type, @typescript-eslint/no-empty-function\n  callback) {\n    var _this = this;\n\n    if (suggestsGoogle === void 0) {\n      suggestsGoogle = [];\n    }\n\n    if (callback === void 0) {\n      callback = function () {};\n    }\n\n    var suggests = [];\n    var userInput = this.state.userInput;\n    var _a = this.props,\n        skipSuggest = _a.skipSuggest,\n        maxFixtures = _a.maxFixtures,\n        fixtures = _a.fixtures;\n    var regex = new RegExp(escapeRegExp(userInput), 'gim');\n    var fixturesSearched = 0;\n    var activeSuggest = null;\n\n    if (fixtures) {\n      fixtures.forEach(function (fixture) {\n        if (maxFixtures && fixturesSearched >= maxFixtures) {\n          return;\n        }\n\n        if (skipSuggest && !skipSuggest(fixture) && fixture.label.match(regex)) {\n          fixturesSearched++;\n          suggests.push(__assign(__assign({}, fixture), {\n            isFixture: true,\n            matchedSubstrings: {\n              length: userInput.length,\n              offset: fixture.label.indexOf(userInput)\n            },\n            placeId: fixture.placeId || fixture.label\n          }));\n        }\n      });\n    }\n\n    suggestsGoogle.forEach(function (suggest) {\n      if (skipSuggest && !skipSuggest(suggest)) {\n        suggests.push({\n          description: suggest.description,\n          isFixture: false,\n          label: _this.props.getSuggestLabel ? _this.props.getSuggestLabel(suggest) : '',\n          matchedSubstrings: suggest.matched_substrings[0],\n          placeId: suggest.place_id\n        });\n      }\n    });\n    activeSuggest = this.updateActiveSuggest(suggests);\n\n    if (this.props.onUpdateSuggests) {\n      this.props.onUpdateSuggests(suggests, activeSuggest);\n    }\n\n    this.setState({\n      suggests: suggests,\n      activeSuggest: activeSuggest\n    }, callback);\n  };\n  /**\r\n   * Return the new activeSuggest object after suggests have been updated\r\n   */\n\n\n  default_1.prototype.updateActiveSuggest = function (suggests) {\n    if (suggests === void 0) {\n      suggests = [];\n    }\n\n    var activeSuggest = this.state.activeSuggest;\n\n    if (activeSuggest) {\n      var newSuggest = suggests.filter(function (listedSuggest) {\n        return activeSuggest && activeSuggest.placeId === listedSuggest.placeId && activeSuggest.isFixture === listedSuggest.isFixture;\n      })[0];\n      activeSuggest = newSuggest || null;\n    }\n\n    return activeSuggest;\n  };\n  /**\r\n   * Show the suggestions\r\n   */\n\n\n  default_1.prototype.showSuggests = function () {\n    this.searchSuggests();\n    this.setState({\n      isSuggestsHidden: false\n    });\n  };\n  /**\r\n   * Hide the suggestions\r\n   */\n\n\n  default_1.prototype.hideSuggests = function () {\n    var _this = this;\n\n    if (this.props.onBlur) {\n      this.props.onBlur(this.state.userInput);\n    }\n\n    this.timer = window.setTimeout(function () {\n      _this.setState({\n        activeSuggest: null,\n        isSuggestsHidden: true\n      });\n    }, 100);\n  };\n  /**\r\n   * Activate a new suggest\r\n   */\n  // eslint-disable-next-line complexity, max-statements\n\n\n  default_1.prototype.activateSuggest = function (direction) {\n    if (this.state.isSuggestsHidden) {\n      this.showSuggests();\n      return;\n    }\n\n    var suggestsCount = this.state.suggests.length - 1;\n    var next = direction === 'next';\n    var newActiveSuggest = null;\n    var newIndex = 0;\n    var i = 0;\n\n    for (i; i <= suggestsCount; i++) {\n      if (this.state.suggests[i] === this.state.activeSuggest) {\n        newIndex = next ? i + 1 : i - 1;\n      }\n    }\n\n    if (!this.state.activeSuggest) {\n      newIndex = next ? 0 : suggestsCount;\n    }\n\n    if (newIndex >= 0 && newIndex <= suggestsCount) {\n      newActiveSuggest = this.state.suggests[newIndex];\n    }\n\n    if (this.props.onActivateSuggest) {\n      this.props.onActivateSuggest(newActiveSuggest);\n    }\n\n    this.setState({\n      activeSuggest: newActiveSuggest\n    });\n  };\n  /**\r\n   * When an item got selected\r\n   */\n  // eslint-disable-next-line complexity\n\n\n  default_1.prototype.selectSuggest = function (suggestToSelect) {\n    var suggest = suggestToSelect || {\n      isFixture: true,\n      label: this.state.userInput,\n      placeId: this.state.userInput\n    };\n\n    if (!suggestToSelect && this.props.autoActivateFirstSuggest && this.state.suggests.length > 0) {\n      suggest = this.state.suggests[0];\n    }\n\n    this.setState({\n      isSuggestsHidden: true,\n      userInput: typeof suggest.label !== 'object' ? suggest.label : suggest.description || ''\n    });\n\n    if (suggest.location) {\n      this.setState({\n        ignoreBlur: false\n      });\n\n      if (this.props.onSuggestSelect) {\n        this.props.onSuggestSelect(suggest);\n      }\n\n      return;\n    }\n\n    this.geocodeSuggest(suggest);\n  };\n  /**\r\n   * Geocode a suggest\r\n   */\n\n\n  default_1.prototype.geocodeSuggest = function (suggestToGeocode) {\n    var _this = this;\n\n    if (!this.geocoder) {\n      return;\n    }\n\n    if (suggestToGeocode.placeId && !suggestToGeocode.isFixture && this.placesService) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var options = {\n        placeId: suggestToGeocode.placeId,\n        sessionToken: this.sessionToken\n      };\n\n      if (this.props.placeDetailFields) {\n        options.fields = this.props.placeDetailFields;\n        options.fields.unshift('geometry');\n      }\n\n      this.placesService.getDetails(options, function (results, status) {\n        if (status === _this.googleMaps.places.PlacesServiceStatus.OK) {\n          var gmaps = results;\n          var location_1 = gmaps.geometry && gmaps.geometry.location;\n\n          var suggest = __assign(__assign({}, suggestToGeocode), {\n            gmaps: gmaps,\n            location: {\n              lat: location_1.lat(),\n              lng: location_1.lng()\n            }\n          });\n\n          _this.sessionToken = new google.maps.places.AutocompleteSessionToken();\n\n          if (_this.props.onSuggestSelect) {\n            _this.props.onSuggestSelect(suggest);\n          }\n        }\n      });\n    } else {\n      var options = {\n        address: suggestToGeocode.label,\n        bounds: this.props.bounds,\n        componentRestrictions: this.props.country ? {\n          country: this.props.country\n        } : // eslint-disable-next-line no-undefined\n        undefined,\n        location: this.props.location\n      };\n      this.geocoder.geocode(options, function (results, status) {\n        if (status === _this.googleMaps.GeocoderStatus.OK) {\n          var gmaps = results[0];\n          var location_2 = gmaps.geometry && gmaps.geometry.location;\n\n          var suggest = __assign(__assign({}, suggestToGeocode), {\n            gmaps: gmaps,\n            location: {\n              lat: location_2.lat(),\n              lng: location_2.lng()\n            }\n          });\n\n          if (_this.props.onSuggestSelect) {\n            _this.props.onSuggestSelect(suggest);\n          }\n        }\n      });\n    }\n  };\n  /**\r\n   * Render the view\r\n   */\n\n\n  default_1.prototype.render = function () {\n    var _this = this;\n\n    var attributes = filterInputAttributes(this.props);\n    var classes = classnames('geosuggest', this.props.className, {\n      'geosuggest--loading': this.state.isLoading\n    });\n    var input = createElement(Input, __assign({\n      className: this.props.inputClassName,\n      ref: function (i) {\n        return _this.input = i;\n      },\n      value: this.state.userInput,\n      doNotSubmitOnEnter: !this.state.isSuggestsHidden,\n      ignoreTab: this.props.ignoreTab,\n      ignoreEnter: this.props.ignoreEnter,\n      style: this.props.style && this.props.style.input,\n      onChange: this.onInputChange,\n      onFocus: this.onInputFocus,\n      onBlur: this.onInputBlur,\n      onKeyDown: this.props.onKeyDown,\n      onKeyPress: this.props.onKeyPress,\n      inputType: this.props.inputType,\n      onNext: this.onNext,\n      onPrev: this.onPrev,\n      onSelect: this.onSelect,\n      onEscape: this.hideSuggests,\n      isSuggestsHidden: this.state.isSuggestsHidden,\n      activeSuggest: this.state.activeSuggest,\n      label: this.props.label,\n      id: this.props.id,\n      listId: this.listId\n    }, attributes));\n    var suggestionsList = createElement(default_1$1, {\n      isHidden: this.state.isSuggestsHidden,\n      style: this.props.style && this.props.style.suggests,\n      suggestItemStyle: this.props.style && this.props.style.suggestItem,\n      userInput: this.state.userInput,\n      isHighlightMatch: Boolean(this.props.highlightMatch),\n      suggestsClassName: this.props.suggestsClassName,\n      suggestItemClassName: this.props.suggestItemClassName,\n      suggests: this.state.suggests,\n      hiddenClassName: this.props.suggestsHiddenClassName,\n      suggestItemActiveClassName: this.props.suggestItemActiveClassName,\n      activeSuggest: this.state.activeSuggest,\n      onSuggestNoResults: this.onSuggestNoResults,\n      onSuggestMouseDown: this.onSuggestMouseDown,\n      onSuggestMouseOut: this.onSuggestMouseOut,\n      onSuggestSelect: this.selectSuggest,\n      renderSuggestItem: this.props.renderSuggestItem,\n      listId: this.listId\n    });\n    return createElement(\"div\", {\n      className: classes,\n      id: this.props.id\n    }, createElement(\"div\", {\n      className: \"geosuggest__input-wrapper\"\n    }, input), createElement(\"div\", {\n      className: \"geosuggest__suggests-wrapper\"\n    }, suggestionsList));\n  };\n  /**\r\n   * Default values for the properties\r\n   */\n\n\n  default_1.defaultProps = defaults;\n  return default_1;\n}(Component);\n\nexport default default_1$2;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/node_modules/react-geosuggest/module/Geosuggest.esm.js"],"names":["createElement","Fragment","PureComponent","Component","classnames","debounce","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","defaults","autoActivateFirstSuggest","disabled","fixtures","getSuggestLabel","suggest","description","highlightMatch","ignoreEnter","ignoreTab","initialValue","maxFixtures","minLength","onKeyDown","onKeyPress","placeholder","queryDelay","skipSuggest","style","inputType","allowedAttributes","filterInputAttributes","props","attributes","keys","forEach","attribute","isDataAttribute","startsWith","isAllowedAttribute","includes","Input","_super","_this","input","onChange","bind","onInputKeyDown","value","event","which","shiftKey","preventDefault","onNext","onPrev","doNotSubmitOnEnter","onSelect","onEscape","focus","blur","render","classes","className","shouldRenderLabel","label","id","tabIndex","htmlFor","ref","type","onFocus","onBlur","role","isSuggestsHidden","activeSuggest","placeId","undefined","listId","defaultProps","autoComplete","default_1","onClick","makeBold","element","key","formatMatchedText","userInput","matchedSubstrings","start","offset","end","boldPart","substring","pre","post","slice","componentDidUpdate","prevProps","isActive","scrollIfNeeded","parent","parentElement","overTop","offsetTop","scrollTop","overBottom","clientHeight","_a","suggestItemClassName","activeClassName","content","renderSuggestItem","isHighlightMatch","li","onMouseDown","onMouseOut","default_1$1","isHidden","suggests","onSuggestNoResults","suggestsClassName","hiddenClassName","map","suggestItemStyle","suggestItemActiveClassName","onSuggestMouseDown","onSuggestMouseOut","onSuggestSelect","escapeRegExp","str","replace","default_1$2","googleMaps","autocompleteService","placesService","sessionToken","geocoder","state","ignoreBlur","isLoading","onInputChange","onAfterInputChange","onInputFocus","onInputBlur","hideSuggests","selectSuggest","setState","JSON","stringify","searchSuggests","componentDidMount","window","google","maps","console","error","places","AutocompleteService","PlacesService","document","AutocompleteSessionToken","Geocoder","componentWillUnmount","clearTimeout","timer","showSuggests","activateSuggest","update","clear","updateSuggests","options","inputLength","isShorterThanMinLength","location","radius","bounds","types","country","Number","componentRestrictions","getPlacePredictions","suggestsGoogle","callback","regex","RegExp","fixturesSearched","fixture","match","push","isFixture","indexOf","matched_substrings","place_id","updateActiveSuggest","onUpdateSuggests","newSuggest","filter","listedSuggest","setTimeout","direction","suggestsCount","next","newActiveSuggest","newIndex","onActivateSuggest","suggestToSelect","geocodeSuggest","suggestToGeocode","placeDetailFields","fields","unshift","getDetails","results","status","PlacesServiceStatus","OK","gmaps","location_1","geometry","lat","lng","address","geocode","GeocoderStatus","location_2","inputClassName","suggestionsList","suggestItem","Boolean","suggestsHiddenClassName"],"mappings":"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","sourcesContent":["import { createElement, Fragment, PureComponent, Component } from 'react';\nimport classnames from 'classnames';\nimport debounce from 'lodash.debounce';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/* istanbul ignore next */\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type, @typescript-eslint/no-empty-function */\r\n/**\r\n * Default values\r\n */\r\nvar defaults = {\r\n    autoActivateFirstSuggest: false,\r\n    disabled: false,\r\n    fixtures: [],\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    getSuggestLabel: function (suggest) { return suggest.description; },\r\n    highlightMatch: true,\r\n    ignoreEnter: false,\r\n    ignoreTab: false,\r\n    initialValue: '',\r\n    maxFixtures: 10,\r\n    minLength: 1,\r\n    onKeyDown: function () { },\r\n    onKeyPress: function () { },\r\n    placeholder: 'Search places',\r\n    queryDelay: 250,\r\n    skipSuggest: function () { return false; },\r\n    style: {},\r\n    inputType: 'text'\r\n};\n\n/**\r\n * Attributes allowed on input elements\r\n */\r\nvar allowedAttributes = [\r\n    'autoCapitalize',\r\n    'autoComplete',\r\n    'autoCorrect',\r\n    'autoFocus',\r\n    'disabled',\r\n    'form',\r\n    'formAction',\r\n    'formEncType',\r\n    'formMethod',\r\n    'formNoValidate',\r\n    'formTarget',\r\n    'height',\r\n    'inputMode',\r\n    'maxLength',\r\n    'name',\r\n    'onClick',\r\n    'onContextMenu',\r\n    'onCopy',\r\n    'onCut',\r\n    'onDoubleClick',\r\n    'onMouseDown',\r\n    'onMouseEnter',\r\n    'onMouseLeave',\r\n    'onMouseMove',\r\n    'onMouseOut',\r\n    'onMouseOver',\r\n    'onMouseUp',\r\n    'onPaste',\r\n    'pattern',\r\n    'placeholder',\r\n    'readOnly',\r\n    'required',\r\n    'size',\r\n    'spellCheck',\r\n    'tabIndex',\r\n    'title',\r\n    'aria-atomic',\r\n    'aria-busy',\r\n    'aria-controls',\r\n    'aria-current',\r\n    'aria-describedby',\r\n    'aria-details',\r\n    'aria-disabled',\r\n    'aria-dropeffect',\r\n    'aria-errormessage',\r\n    'aria-flowto',\r\n    'aria-grabbed',\r\n    'aria-haspopup',\r\n    'aria-hidden',\r\n    'aria-invalid',\r\n    'aria-keyshortcuts',\r\n    'aria-label',\r\n    'aria-labelledby',\r\n    'aria-live',\r\n    'aria-owns',\r\n    'aria-relevant',\r\n    'aria-roledescription',\r\n    'aria-activedescendant',\r\n    'aria-autocomplete',\r\n    'aria-multiline',\r\n    'aria-placeholder',\r\n    'aria-readonly',\r\n    'aria-required'\r\n];\r\n/**\r\n * Filter the properties for only allowed input properties\r\n */\r\nfunction filterInputAttributes (props) {\r\n    var attributes = {};\r\n    Object.keys(props).forEach(function (attribute) {\r\n        var isDataAttribute = attribute.startsWith('data-');\r\n        var isAllowedAttribute = allowedAttributes.includes(attribute);\r\n        if (isAllowedAttribute || isDataAttribute) {\r\n            attributes[attribute] = props[attribute];\r\n        }\r\n    });\r\n    return attributes;\r\n}\n\n/**\r\n * The input field\r\n */\r\nvar Input = /** @class */ (function (_super) {\r\n    __extends(Input, _super);\r\n    /**\r\n     * The constructor.\r\n     */\r\n    function Input(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /* eslint-enable @typescript-eslint/no-empty-function */\r\n        /**\r\n         * The reference to the input element\r\n         */\r\n        _this.input = null;\r\n        _this.onChange = _this.onChange.bind(_this);\r\n        _this.onInputKeyDown = _this.onInputKeyDown.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * When the input got changed\r\n     */\r\n    Input.prototype.onChange = function () {\r\n        if (this.input) {\r\n            this.props.onChange(this.input.value);\r\n        }\r\n    };\r\n    /**\r\n     * When a key gets pressed in the input\r\n     */\r\n    // eslint-disable-next-line complexity\r\n    Input.prototype.onInputKeyDown = function (event) {\r\n        // Call props.onKeyDown if defined\r\n        // Gives the developer a little bit more control if needed\r\n        if (this.props.onKeyDown) {\r\n            this.props.onKeyDown(event);\r\n        }\r\n        switch (event.which) {\r\n            case 40: // DOWN\r\n                if (!event.shiftKey) {\r\n                    event.preventDefault();\r\n                    this.props.onNext();\r\n                }\r\n                break;\r\n            case 38: // UP\r\n                if (!event.shiftKey) {\r\n                    event.preventDefault();\r\n                    this.props.onPrev();\r\n                }\r\n                break;\r\n            case 13: // ENTER\r\n                if (this.props.doNotSubmitOnEnter) {\r\n                    event.preventDefault();\r\n                }\r\n                if (!this.props.ignoreEnter) {\r\n                    this.props.onSelect();\r\n                }\r\n                break;\r\n            case 9: // TAB\r\n                if (!this.props.ignoreTab) {\r\n                    this.props.onSelect();\r\n                }\r\n                break;\r\n            case 27: // ESC\r\n                this.props.onEscape();\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Focus the input\r\n     */\r\n    Input.prototype.focus = function () {\r\n        if (this.input) {\r\n            this.input.focus();\r\n        }\r\n    };\r\n    /**\r\n     * Blur the input\r\n     */\r\n    Input.prototype.blur = function () {\r\n        if (this.input) {\r\n            this.input.blur();\r\n        }\r\n    };\r\n    /**\r\n     * Render the view\r\n     */\r\n    Input.prototype.render = function () {\r\n        var _this = this;\r\n        var attributes = filterInputAttributes(this.props);\r\n        var classes = classnames('geosuggest__input', this.props.className);\r\n        var shouldRenderLabel = this.props.label && this.props.id;\r\n        if (!attributes.tabIndex) {\r\n            attributes.tabIndex = 0;\r\n        }\r\n        return (createElement(Fragment, null,\r\n            shouldRenderLabel && (createElement(\"label\", { className: \"geosuggest__label\", htmlFor: this.props.id }, this.props.label)),\r\n            createElement(\"input\", __assign({ className: classes, id: \"geosuggest__input\" + (this.props.id ? \"--\" + this.props.id : ''), ref: function (i) { return (_this.input = i); }, type: this.props.inputType }, attributes, { value: this.props.value, style: this.props.style, onKeyDown: this.onInputKeyDown, onChange: this.onChange, onKeyPress: this.props.onKeyPress, onFocus: this.props.onFocus, onBlur: this.props.onBlur, role: \"combobox\", \"aria-expanded\": !this.props.isSuggestsHidden, \"aria-activedescendant\": this.props.activeSuggest\r\n                    ? this.props.activeSuggest.placeId\r\n                    : // eslint-disable-next-line no-undefined\r\n                        undefined, \"aria-owns\": this.props.listId }))));\r\n    };\r\n    /* eslint-disable @typescript-eslint/no-empty-function */\r\n    /**\r\n     * Default values for the properties\r\n     */\r\n    Input.defaultProps = {\r\n        activeSuggest: null,\r\n        autoComplete: 'nope',\r\n        className: '',\r\n        isSuggestsHidden: true,\r\n        listId: '',\r\n        inputType: 'text',\r\n        onBlur: function () { },\r\n        onChange: function () { },\r\n        onEscape: function () { },\r\n        onFocus: function () { },\r\n        onKeyDown: function () { },\r\n        onKeyPress: function () { },\r\n        onNext: function () { },\r\n        onPrev: function () { },\r\n        onSelect: function () { },\r\n        value: ''\r\n    };\r\n    return Input;\r\n}(PureComponent));\n\n/**\r\n * A single Geosuggest item in the list\r\n */\r\nvar default_1 = /** @class */ (function (_super) {\r\n    __extends(default_1, _super);\r\n    /**\r\n     * The constructor.\r\n     */\r\n    function default_1(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * The reference to the suggest element\r\n         */\r\n        _this.ref = null;\r\n        _this.onClick = _this.onClick.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Makes a text bold\r\n     */\r\n    default_1.prototype.makeBold = function (element, key) {\r\n        return (createElement(\"b\", { className: \"geosuggest__item__matched-text\", key: key }, element));\r\n    };\r\n    /**\r\n     * Replace matched text with the same in bold\r\n     */\r\n    default_1.prototype.formatMatchedText = function (userInput, suggest) {\r\n        if (!userInput || !suggest.matchedSubstrings) {\r\n            return suggest.label;\r\n        }\r\n        var start = suggest.matchedSubstrings.offset;\r\n        var length = suggest.matchedSubstrings.length;\r\n        var end = start + length;\r\n        var boldPart = this.makeBold(suggest.label.substring(start, end), suggest.label);\r\n        var pre = '';\r\n        var post = '';\r\n        if (start > 0) {\r\n            pre = suggest.label.slice(0, start);\r\n        }\r\n        if (end < suggest.label.length) {\r\n            post = suggest.label.slice(end);\r\n        }\r\n        return (createElement(\"span\", null,\r\n            pre,\r\n            boldPart,\r\n            post));\r\n    };\r\n    /**\r\n     * Checking if item just became active and scrolling if needed.\r\n     */\r\n    default_1.prototype.componentDidUpdate = function (prevProps) {\r\n        if (!prevProps.isActive && this.props.isActive) {\r\n            this.scrollIfNeeded();\r\n        }\r\n    };\r\n    /**\r\n     * Scrolling current item to the center of the list if item needs scrolling.\r\n     * Item is scrolled to the center of the list.\r\n     */\r\n    default_1.prototype.scrollIfNeeded = function () {\r\n        var element = this.ref;\r\n        var parent = element && element.parentElement;\r\n        if (!element || !parent) {\r\n            return;\r\n        }\r\n        var overTop = element.offsetTop - parent.offsetTop < parent.scrollTop;\r\n        var overBottom = element.offsetTop - parent.offsetTop + element.clientHeight >\r\n            parent.scrollTop + parent.clientHeight;\r\n        if (overTop || overBottom) {\r\n            parent.scrollTop =\r\n                element.offsetTop -\r\n                    parent.offsetTop -\r\n                    parent.clientHeight / 2 +\r\n                    element.clientHeight / 2;\r\n        }\r\n    };\r\n    /**\r\n     * When the suggest item got clicked\r\n     */\r\n    default_1.prototype.onClick = function (event) {\r\n        event.preventDefault();\r\n        this.props.onSelect(this.props.suggest);\r\n    };\r\n    /**\r\n     * Render the view\r\n     */\r\n    default_1.prototype.render = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var suggest = this.props.suggest;\r\n        var classes = classnames('geosuggest__item', this.props.className, this.props.suggestItemClassName, { 'geosuggest__item--active': this.props.isActive }, (_a = {},\r\n            _a[this.props.activeClassName || ''] = this.props.activeClassName\r\n                ? this.props.isActive\r\n                : null,\r\n            _a));\r\n        var content = suggest.label;\r\n        if (this.props.renderSuggestItem) {\r\n            content = this.props.renderSuggestItem(suggest, this.props.userInput);\r\n        }\r\n        else if (this.props.isHighlightMatch) {\r\n            content = this.formatMatchedText(this.props.userInput, suggest);\r\n        }\r\n        return (createElement(\"li\", { className: classes, ref: function (li) { return (_this.ref = li); }, style: this.props.style, onMouseDown: this.props.onMouseDown, onMouseOut: this.props.onMouseOut, onClick: this.onClick, role: \"option\", \"aria-selected\": this.props.isActive, id: suggest.placeId }, content));\r\n    };\r\n    return default_1;\r\n}(PureComponent));\n\n/**\r\n * The list with suggestions.\r\n */\r\nvar default_1$1 = /** @class */ (function (_super) {\r\n    __extends(default_1$1, _super);\r\n    function default_1$1() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Whether or not it is hidden\r\n     */\r\n    default_1$1.prototype.isHidden = function () {\r\n        return this.props.isHidden || this.props.suggests.length === 0;\r\n    };\r\n    /**\r\n     * There are new properties available for the list\r\n     */\r\n    default_1$1.prototype.componentDidUpdate = function (prevProps) {\r\n        if (prevProps.suggests !== this.props.suggests) {\r\n            if (this.props.suggests.length === 0) {\r\n                this.props.onSuggestNoResults();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Render the view\r\n     * @return {Function} The React element to render\r\n     */\r\n    default_1$1.prototype.render = function () {\r\n        var _a;\r\n        var _this = this;\r\n        var classes = classnames('geosuggest__suggests', this.props.suggestsClassName, { 'geosuggest__suggests--hidden': this.isHidden() }, (_a = {},\r\n            _a[this.props.hiddenClassName || ''] = this.props.hiddenClassName\r\n                ? this.isHidden()\r\n                : null,\r\n            _a));\r\n        return (createElement(\"ul\", { className: classes, style: this.props.style, role: \"listbox\", id: this.props.listId }, this.props.suggests.map(function (suggest) {\r\n            var isActive = (_this.props.activeSuggest &&\r\n                suggest.placeId === _this.props.activeSuggest.placeId) ||\r\n                false;\r\n            return (createElement(default_1, { key: suggest.placeId, className: suggest.className || '', userInput: _this.props.userInput, isHighlightMatch: _this.props.isHighlightMatch, suggest: suggest, style: _this.props.suggestItemStyle, suggestItemClassName: _this.props.suggestItemClassName, isActive: isActive, activeClassName: _this.props.suggestItemActiveClassName, onMouseDown: _this.props.onSuggestMouseDown, onMouseOut: _this.props.onSuggestMouseOut, onSelect: _this.props.onSuggestSelect, renderSuggestItem: _this.props.renderSuggestItem }));\r\n        })));\r\n    };\r\n    return default_1$1;\r\n}(PureComponent));\n\n/* global window */\r\n// Escapes special characters in user input for regex\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n}\r\n/**\r\n * Entry point for the Geosuggest component\r\n */\r\nvar default_1$2 = /** @class */ (function (_super) {\r\n    __extends(default_1, _super);\r\n    /**\r\n     * The constructor. Sets the initial state.\r\n     */\r\n    // eslint-disable-next-line max-statements\r\n    function default_1(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        /**\r\n         * The Google Map instance\r\n         */\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        _this.googleMaps = null;\r\n        /**\r\n         * The autocomple service to get suggests\r\n         */\r\n        _this.autocompleteService = null;\r\n        /**\r\n         * The places service to get place details\r\n         */\r\n        _this.placesService = null;\r\n        /**\r\n         * The sessionToken service to use session based monetization\r\n         */\r\n        _this.sessionToken = undefined;\r\n        /**\r\n         * The geocoder to get geocoded results\r\n         */\r\n        _this.geocoder = null;\r\n        /**\r\n         * The input component\r\n         */\r\n        _this.input = null;\r\n        _this.state = {\r\n            activeSuggest: null,\r\n            ignoreBlur: false,\r\n            isLoading: false,\r\n            isSuggestsHidden: true,\r\n            suggests: [],\r\n            userInput: props.initialValue || ''\r\n        };\r\n        _this.onInputChange = _this.onInputChange.bind(_this);\r\n        _this.onAfterInputChange = _this.onAfterInputChange.bind(_this);\r\n        _this.onInputFocus = _this.onInputFocus.bind(_this);\r\n        _this.onInputBlur = _this.onInputBlur.bind(_this);\r\n        _this.onNext = _this.onNext.bind(_this);\r\n        _this.onPrev = _this.onPrev.bind(_this);\r\n        _this.onSelect = _this.onSelect.bind(_this);\r\n        _this.onSuggestMouseDown = _this.onSuggestMouseDown.bind(_this);\r\n        _this.onSuggestMouseOut = _this.onSuggestMouseOut.bind(_this);\r\n        _this.onSuggestNoResults = _this.onSuggestNoResults.bind(_this);\r\n        _this.hideSuggests = _this.hideSuggests.bind(_this);\r\n        _this.selectSuggest = _this.selectSuggest.bind(_this);\r\n        _this.listId = \"geosuggest__list\" + (props.id ? \"--\" + props.id : '');\r\n        if (props.queryDelay) {\r\n            _this.onAfterInputChange = debounce(_this.onAfterInputChange, props.queryDelay);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Change inputValue if prop changes\r\n     */\r\n    default_1.prototype.componentDidUpdate = function (prevProps) {\r\n        if (prevProps.initialValue !== this.props.initialValue) {\r\n            this.setState({ userInput: this.props.initialValue || '' });\r\n        }\r\n        if (JSON.stringify(prevProps.fixtures) !== JSON.stringify(this.props.fixtures)) {\r\n            this.searchSuggests();\r\n        }\r\n    };\r\n    /**\r\n     * Called on the client side after component is mounted.\r\n     * Google api sdk object will be obtained and cached as a instance property.\r\n     * Necessary objects of google api will also be determined and saved.\r\n     */\r\n    default_1.prototype.componentDidMount = function () {\r\n        if (typeof window === 'undefined') {\r\n            return;\r\n        }\r\n        var googleMaps = this.props.googleMaps ||\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            (window.google && window.google.maps) ||\r\n            this.googleMaps;\r\n        /* istanbul ignore next */\r\n        if (!googleMaps) {\r\n            if (console) {\r\n                // eslint-disable-next-line no-console\r\n                console.error('Google maps API was not found in the page.');\r\n            }\r\n            return;\r\n        }\r\n        this.googleMaps = googleMaps;\r\n        this.autocompleteService = new googleMaps.places.AutocompleteService();\r\n        this.placesService = new googleMaps.places.PlacesService(document.createElement('div'));\r\n        this.sessionToken = new googleMaps.places.AutocompleteSessionToken();\r\n        this.geocoder = new googleMaps.Geocoder();\r\n    };\r\n    /**\r\n     * When the component will unmount\r\n     */\r\n    default_1.prototype.componentWillUnmount = function () {\r\n        clearTimeout(this.timer);\r\n    };\r\n    /**\r\n     * When the input changed\r\n     */\r\n    default_1.prototype.onInputChange = function (userInput) {\r\n        if (!userInput) {\r\n            if (this.props.onSuggestSelect) {\r\n                this.props.onSuggestSelect();\r\n            }\r\n        }\r\n        this.setState({ userInput: userInput }, this.onAfterInputChange);\r\n    };\r\n    /**\r\n     * On After the input got changed\r\n     */\r\n    default_1.prototype.onAfterInputChange = function () {\r\n        this.showSuggests();\r\n        if (this.props.onChange) {\r\n            this.props.onChange(this.state.userInput);\r\n        }\r\n    };\r\n    /**\r\n     * When the input gets focused\r\n     */\r\n    default_1.prototype.onInputFocus = function () {\r\n        if (this.props.onFocus) {\r\n            this.props.onFocus();\r\n        }\r\n        this.showSuggests();\r\n    };\r\n    /**\r\n     * When the input gets blurred\r\n     */\r\n    default_1.prototype.onInputBlur = function () {\r\n        if (!this.state.ignoreBlur) {\r\n            this.hideSuggests();\r\n        }\r\n    };\r\n    default_1.prototype.onNext = function () {\r\n        this.activateSuggest('next');\r\n    };\r\n    default_1.prototype.onPrev = function () {\r\n        this.activateSuggest('prev');\r\n    };\r\n    default_1.prototype.onSelect = function () {\r\n        this.selectSuggest(this.state.activeSuggest);\r\n    };\r\n    default_1.prototype.onSuggestMouseDown = function () {\r\n        this.setState({ ignoreBlur: true });\r\n    };\r\n    default_1.prototype.onSuggestMouseOut = function () {\r\n        this.setState({ ignoreBlur: false });\r\n    };\r\n    default_1.prototype.onSuggestNoResults = function () {\r\n        if (this.props.onSuggestNoResults) {\r\n            this.props.onSuggestNoResults(this.state.userInput);\r\n        }\r\n    };\r\n    /**\r\n     * Focus the input\r\n     */\r\n    default_1.prototype.focus = function () {\r\n        if (this.input) {\r\n            this.input.focus();\r\n        }\r\n    };\r\n    /**\r\n     * Blur the input\r\n     */\r\n    default_1.prototype.blur = function () {\r\n        if (this.input) {\r\n            this.input.blur();\r\n        }\r\n    };\r\n    /**\r\n     * Update the value of the user input\r\n     */\r\n    default_1.prototype.update = function (userInput) {\r\n        this.setState({ userInput: userInput });\r\n        if (this.props.onChange) {\r\n            this.props.onChange(userInput);\r\n        }\r\n    };\r\n    /*\r\n     * Clear the input and close the suggestion pane\r\n     */\r\n    default_1.prototype.clear = function () {\r\n        this.setState({ userInput: '' }, this.hideSuggests);\r\n    };\r\n    /**\r\n     * Search for new suggests\r\n     */\r\n    // eslint-disable-next-line complexity, max-statements\r\n    default_1.prototype.searchSuggests = function () {\r\n        var _this = this;\r\n        if (!this.state.userInput) {\r\n            this.updateSuggests();\r\n            return;\r\n        }\r\n        var options = {\r\n            input: this.state.userInput,\r\n            sessionToken: this.sessionToken\r\n        };\r\n        var inputLength = this.state.userInput.length;\r\n        var isShorterThanMinLength = this.props.minLength && inputLength < this.props.minLength;\r\n        if (isShorterThanMinLength) {\r\n            this.updateSuggests();\r\n            return;\r\n        }\r\n        var _a = this.props, location = _a.location, radius = _a.radius, bounds = _a.bounds, types = _a.types, country = _a.country;\r\n        /* eslint-disable curly */\r\n        if (location)\r\n            options.location = location;\r\n        if (radius)\r\n            options.radius = Number(this.props.radius);\r\n        if (bounds)\r\n            options.bounds = bounds;\r\n        if (types)\r\n            options.types = types;\r\n        if (country)\r\n            options.componentRestrictions = { country: country };\r\n        /* eslint-enable curly */\r\n        this.setState({ isLoading: true }, function () {\r\n            if (!_this.autocompleteService) {\r\n                _this.setState({ isLoading: false });\r\n                return;\r\n            }\r\n            _this.autocompleteService.getPlacePredictions(options, function (suggestsGoogle) {\r\n                _this.setState({ isLoading: false });\r\n                _this.updateSuggests(suggestsGoogle || [], // can be null\r\n                function () {\r\n                    if (_this.props.autoActivateFirstSuggest &&\r\n                        !_this.state.activeSuggest) {\r\n                        _this.activateSuggest('next');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Update the suggests\r\n     */\r\n    default_1.prototype.updateSuggests = function (suggestsGoogle, \r\n    // eslint-disable-next-line @typescript-eslint/explicit-function-return-type, @typescript-eslint/no-empty-function\r\n    callback) {\r\n        var _this = this;\r\n        if (suggestsGoogle === void 0) { suggestsGoogle = []; }\r\n        if (callback === void 0) { callback = function () { }; }\r\n        var suggests = [];\r\n        var userInput = this.state.userInput;\r\n        var _a = this.props, skipSuggest = _a.skipSuggest, maxFixtures = _a.maxFixtures, fixtures = _a.fixtures;\r\n        var regex = new RegExp(escapeRegExp(userInput), 'gim');\r\n        var fixturesSearched = 0;\r\n        var activeSuggest = null;\r\n        if (fixtures) {\r\n            fixtures.forEach(function (fixture) {\r\n                if (maxFixtures && fixturesSearched >= maxFixtures) {\r\n                    return;\r\n                }\r\n                if (skipSuggest &&\r\n                    !skipSuggest(fixture) &&\r\n                    fixture.label.match(regex)) {\r\n                    fixturesSearched++;\r\n                    suggests.push(__assign(__assign({}, fixture), { isFixture: true, matchedSubstrings: {\r\n                            length: userInput.length,\r\n                            offset: fixture.label.indexOf(userInput)\r\n                        }, placeId: fixture.placeId || fixture.label }));\r\n                }\r\n            });\r\n        }\r\n        suggestsGoogle.forEach(function (suggest) {\r\n            if (skipSuggest && !skipSuggest(suggest)) {\r\n                suggests.push({\r\n                    description: suggest.description,\r\n                    isFixture: false,\r\n                    label: _this.props.getSuggestLabel\r\n                        ? _this.props.getSuggestLabel(suggest)\r\n                        : '',\r\n                    matchedSubstrings: suggest.matched_substrings[0],\r\n                    placeId: suggest.place_id\r\n                });\r\n            }\r\n        });\r\n        activeSuggest = this.updateActiveSuggest(suggests);\r\n        if (this.props.onUpdateSuggests) {\r\n            this.props.onUpdateSuggests(suggests, activeSuggest);\r\n        }\r\n        this.setState({ suggests: suggests, activeSuggest: activeSuggest }, callback);\r\n    };\r\n    /**\r\n     * Return the new activeSuggest object after suggests have been updated\r\n     */\r\n    default_1.prototype.updateActiveSuggest = function (suggests) {\r\n        if (suggests === void 0) { suggests = []; }\r\n        var activeSuggest = this.state.activeSuggest;\r\n        if (activeSuggest) {\r\n            var newSuggest = suggests.filter(function (listedSuggest) {\r\n                return activeSuggest &&\r\n                    activeSuggest.placeId === listedSuggest.placeId &&\r\n                    activeSuggest.isFixture === listedSuggest.isFixture;\r\n            })[0];\r\n            activeSuggest = newSuggest || null;\r\n        }\r\n        return activeSuggest;\r\n    };\r\n    /**\r\n     * Show the suggestions\r\n     */\r\n    default_1.prototype.showSuggests = function () {\r\n        this.searchSuggests();\r\n        this.setState({ isSuggestsHidden: false });\r\n    };\r\n    /**\r\n     * Hide the suggestions\r\n     */\r\n    default_1.prototype.hideSuggests = function () {\r\n        var _this = this;\r\n        if (this.props.onBlur) {\r\n            this.props.onBlur(this.state.userInput);\r\n        }\r\n        this.timer = window.setTimeout(function () {\r\n            _this.setState({\r\n                activeSuggest: null,\r\n                isSuggestsHidden: true\r\n            });\r\n        }, 100);\r\n    };\r\n    /**\r\n     * Activate a new suggest\r\n     */\r\n    // eslint-disable-next-line complexity, max-statements\r\n    default_1.prototype.activateSuggest = function (direction) {\r\n        if (this.state.isSuggestsHidden) {\r\n            this.showSuggests();\r\n            return;\r\n        }\r\n        var suggestsCount = this.state.suggests.length - 1;\r\n        var next = direction === 'next';\r\n        var newActiveSuggest = null;\r\n        var newIndex = 0;\r\n        var i = 0;\r\n        for (i; i <= suggestsCount; i++) {\r\n            if (this.state.suggests[i] === this.state.activeSuggest) {\r\n                newIndex = next ? i + 1 : i - 1;\r\n            }\r\n        }\r\n        if (!this.state.activeSuggest) {\r\n            newIndex = next ? 0 : suggestsCount;\r\n        }\r\n        if (newIndex >= 0 && newIndex <= suggestsCount) {\r\n            newActiveSuggest = this.state.suggests[newIndex];\r\n        }\r\n        if (this.props.onActivateSuggest) {\r\n            this.props.onActivateSuggest(newActiveSuggest);\r\n        }\r\n        this.setState({ activeSuggest: newActiveSuggest });\r\n    };\r\n    /**\r\n     * When an item got selected\r\n     */\r\n    // eslint-disable-next-line complexity\r\n    default_1.prototype.selectSuggest = function (suggestToSelect) {\r\n        var suggest = suggestToSelect || {\r\n            isFixture: true,\r\n            label: this.state.userInput,\r\n            placeId: this.state.userInput\r\n        };\r\n        if (!suggestToSelect &&\r\n            this.props.autoActivateFirstSuggest &&\r\n            this.state.suggests.length > 0) {\r\n            suggest = this.state.suggests[0];\r\n        }\r\n        this.setState({\r\n            isSuggestsHidden: true,\r\n            userInput: typeof suggest.label !== 'object'\r\n                ? suggest.label\r\n                : suggest.description || ''\r\n        });\r\n        if (suggest.location) {\r\n            this.setState({ ignoreBlur: false });\r\n            if (this.props.onSuggestSelect) {\r\n                this.props.onSuggestSelect(suggest);\r\n            }\r\n            return;\r\n        }\r\n        this.geocodeSuggest(suggest);\r\n    };\r\n    /**\r\n     * Geocode a suggest\r\n     */\r\n    default_1.prototype.geocodeSuggest = function (suggestToGeocode) {\r\n        var _this = this;\r\n        if (!this.geocoder) {\r\n            return;\r\n        }\r\n        if (suggestToGeocode.placeId &&\r\n            !suggestToGeocode.isFixture &&\r\n            this.placesService) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            var options = {\r\n                placeId: suggestToGeocode.placeId,\r\n                sessionToken: this.sessionToken\r\n            };\r\n            if (this.props.placeDetailFields) {\r\n                options.fields = this.props.placeDetailFields;\r\n                options.fields.unshift('geometry');\r\n            }\r\n            this.placesService.getDetails(options, function (results, status) {\r\n                if (status === _this.googleMaps.places.PlacesServiceStatus.OK) {\r\n                    var gmaps = results;\r\n                    var location_1 = (gmaps.geometry &&\r\n                        gmaps.geometry.location);\r\n                    var suggest = __assign(__assign({}, suggestToGeocode), { gmaps: gmaps, location: {\r\n                            lat: location_1.lat(),\r\n                            lng: location_1.lng()\r\n                        } });\r\n                    _this.sessionToken = new google.maps.places.AutocompleteSessionToken();\r\n                    if (_this.props.onSuggestSelect) {\r\n                        _this.props.onSuggestSelect(suggest);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            var options = {\r\n                address: suggestToGeocode.label,\r\n                bounds: this.props.bounds,\r\n                componentRestrictions: this.props.country\r\n                    ? { country: this.props.country }\r\n                    : // eslint-disable-next-line no-undefined\r\n                        undefined,\r\n                location: this.props.location\r\n            };\r\n            this.geocoder.geocode(options, function (results, status) {\r\n                if (status === _this.googleMaps.GeocoderStatus.OK) {\r\n                    var gmaps = results[0];\r\n                    var location_2 = (gmaps.geometry &&\r\n                        gmaps.geometry.location);\r\n                    var suggest = __assign(__assign({}, suggestToGeocode), { gmaps: gmaps, location: {\r\n                            lat: location_2.lat(),\r\n                            lng: location_2.lng()\r\n                        } });\r\n                    if (_this.props.onSuggestSelect) {\r\n                        _this.props.onSuggestSelect(suggest);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Render the view\r\n     */\r\n    default_1.prototype.render = function () {\r\n        var _this = this;\r\n        var attributes = filterInputAttributes(this.props);\r\n        var classes = classnames('geosuggest', this.props.className, {\r\n            'geosuggest--loading': this.state.isLoading\r\n        });\r\n        var input = (createElement(Input, __assign({ className: this.props.inputClassName, ref: function (i) { return (_this.input = i); }, value: this.state.userInput, doNotSubmitOnEnter: !this.state.isSuggestsHidden, ignoreTab: this.props.ignoreTab, ignoreEnter: this.props.ignoreEnter, style: this.props.style && this.props.style.input, onChange: this.onInputChange, onFocus: this.onInputFocus, onBlur: this.onInputBlur, onKeyDown: this.props.onKeyDown, onKeyPress: this.props.onKeyPress, inputType: this.props.inputType, onNext: this.onNext, onPrev: this.onPrev, onSelect: this.onSelect, onEscape: this.hideSuggests, isSuggestsHidden: this.state.isSuggestsHidden, activeSuggest: this.state.activeSuggest, label: this.props.label, id: this.props.id, listId: this.listId }, attributes)));\r\n        var suggestionsList = (createElement(default_1$1, { isHidden: this.state.isSuggestsHidden, style: this.props.style && this.props.style.suggests, suggestItemStyle: this.props.style && this.props.style.suggestItem, userInput: this.state.userInput, isHighlightMatch: Boolean(this.props.highlightMatch), suggestsClassName: this.props.suggestsClassName, suggestItemClassName: this.props.suggestItemClassName, suggests: this.state.suggests, hiddenClassName: this.props.suggestsHiddenClassName, suggestItemActiveClassName: this.props.suggestItemActiveClassName, activeSuggest: this.state.activeSuggest, onSuggestNoResults: this.onSuggestNoResults, onSuggestMouseDown: this.onSuggestMouseDown, onSuggestMouseOut: this.onSuggestMouseOut, onSuggestSelect: this.selectSuggest, renderSuggestItem: this.props.renderSuggestItem, listId: this.listId }));\r\n        return (createElement(\"div\", { className: classes, id: this.props.id },\r\n            createElement(\"div\", { className: \"geosuggest__input-wrapper\" }, input),\r\n            createElement(\"div\", { className: \"geosuggest__suggests-wrapper\" }, suggestionsList)));\r\n    };\r\n    /**\r\n     * Default values for the properties\r\n     */\r\n    default_1.defaultProps = defaults;\r\n    return default_1;\r\n}(Component));\n\nexport default default_1$2;\n"]},"metadata":{},"sourceType":"module"}