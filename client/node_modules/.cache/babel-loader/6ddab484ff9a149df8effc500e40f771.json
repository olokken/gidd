{"ast":null,"code":"var _jsxFileName = \"/Users/olelokken/DEV/gidd/client/src/containers/GroupsAndFriends.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport FriendList from '../components/GroupsAndFriendsComponents/FriendList';\nimport GroupList from '../components/GroupsAndFriendsComponents/GroupList';\nimport FeedCard from '../components/GroupsAndFriendsComponents/FeedCard';\nimport axios from '../Axios';\nimport { UserContext } from '../UserContext';\nimport { Button, Drawer } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport CloseIcon from '@material-ui/icons/Close';\nimport config from '../Config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n    display: flex;\n    margin-left: 10px;\n    width: 100%;\n`;\n_c = Container;\n\nconst GroupsAndFriends = () => {\n  _s();\n\n  const [friends, setFriends] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [groups, setGroups] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n  const [selectedGroup, setSelectedGroup] = useState({\n    owner: {\n      firstName: '',\n      surname: '',\n      userId: '',\n      email: '',\n      image: '',\n      password: '',\n      phoneNumber: '',\n      activityLevel: '',\n      points: ''\n    },\n    groupName: '',\n    groupId: '-1',\n    users: []\n  });\n  const [state, setState] = useState({\n    mobileView: false,\n    drawerOpen: false,\n    drawerOpen2: false\n  });\n  const {\n    mobileView,\n    drawerOpen,\n    drawerOpen2\n  } = state;\n  useEffect(() => {\n    const setResponsiveness = () => {\n      return window.innerWidth < 951 ? setState(prevState => ({ ...prevState,\n        mobileView: true\n      })) : setState(prevState => ({ ...prevState,\n        mobileView: false\n      }));\n    };\n\n    setResponsiveness();\n    window.addEventListener('resize', () => setResponsiveness());\n  }, []); //henter alle dine grupper\n\n  useEffect(() => {\n    updateGroups();\n  }, []);\n\n  const updateGroups = () => {\n    console.log('oppdaterer');\n    const url = `user/${user}/group`;\n    axios.get(url, config).then(response => {\n      setGroups(response.data['groups']);\n\n      if (selectedGroup.groupId === '-1' && response.data['groups'].length > 0) {\n        setSelectedGroup(response.data['groups'][0]);\n      }\n    }).catch(error => {\n      console.log('Kunne ikke hente dine grupper' + error.message);\n    });\n  }; //henter alle users\n\n\n  useEffect(() => {\n    axios.get('/user').then(response => {\n      console.log(response.data);\n      setUsers(response.data.filter(test => Object.values(test)[0] != user && friendCheck(test)));\n    }).catch(error => console.log(error));\n  }, [friends, user]);\n\n  const handleGroupClicked = group => {\n    setSelectedGroup(group);\n  };\n\n  const leaveGroup = () => {\n    const groupId = selectedGroup.groupId;\n    axios.delete(`group/${groupId}/user/${user}`, config).then(response => {\n      JSON.stringify(response);\n      console.log(response.data);\n    }).then(() => {\n      updateGroups();\n      setSelectedGroup({\n        owner: {\n          firstName: '',\n          surname: '',\n          userId: '',\n          email: '',\n          image: '',\n          password: '',\n          phoneNumber: '',\n          activityLevel: '',\n          points: ''\n        },\n        groupName: '',\n        groupId: '0',\n        users: []\n      });\n    }).catch(error => {\n      alert('Du kan ikke forlate gruppen mens du er eier');\n      console.log('Kunne ikke forlate gruppe: ' + error.message);\n    });\n  };\n\n  const deleteGroup = async () => {\n    if (selectedGroup.owner['userId'].toString() === user) {\n      const groupId = selectedGroup.groupId;\n      const request = await axios.delete(`/group/${groupId}`, config);\n      setSelectedGroup({\n        owner: {\n          firstName: '',\n          surname: '',\n          userId: '',\n          email: '',\n          image: '',\n          password: '',\n          phoneNumber: '',\n          activityLevel: '',\n          points: ''\n        },\n        groupName: '',\n        groupId: '-1',\n        users: []\n      });\n      updateGroups();\n      return request;\n    } else {\n      console.log('You must be the owner in order to delete the group.');\n    }\n  }; //sjekker om user finnes i friends\n\n\n  const friendCheck = test => {\n    let a = true;\n    friends.forEach(function (friend) {\n      if (Object.values(friend)[0] === Object.values(test)[0]) {\n        a = false;\n      }\n    });\n    return a;\n  };\n\n  const updateFriends = () => {\n    axios.get(`/user/${user}/user`, config).then(response => {\n      console.log('Venner:');\n      console.log(response.data['users']);\n      setFriends(response.data['users']);\n    }).catch(error => console.log(error));\n  }; //henter ut alle venner\n\n\n  useEffect(() => {\n    updateFriends();\n  }, [user]);\n\n  const displayDesktop = () => {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '20%',\n          minWidth: '200px'\n        },\n        children: /*#__PURE__*/_jsxDEV(FriendList, {\n          updateFriends: updateFriends,\n          users: users,\n          friends: friends\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '57%'\n        },\n        children: /*#__PURE__*/_jsxDEV(FeedCard, {\n          selectedGroup: selectedGroup,\n          updateGroups: updateGroups,\n          leaveGroup: leaveGroup,\n          deleteGroup: deleteGroup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '20%',\n          minWidth: '200px',\n          marginRight: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(GroupList, {\n          updateGroups: updateGroups,\n          friends: friends,\n          groups: groups,\n          handleGroupClicked: handleGroupClicked\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this);\n  };\n\n  const displayMobile = () => {\n    const handleDrawerOpen = () => setState(prevState => ({ ...prevState,\n      drawerOpen: true\n    }));\n\n    const handleDrawerClose = () => setState(prevState => ({ ...prevState,\n      drawerOpen: false\n    }));\n\n    const handleDrawerOpen2 = () => setState(prevState => ({ ...prevState,\n      drawerOpen2: true\n    }));\n\n    const handleDrawerClose2 = () => setState(prevState => ({ ...prevState,\n      drawerOpen2: false\n    }));\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            border: '1px solid lightgrey',\n            marginTop: '5px',\n            width: '90%',\n            marginRight: '5px'\n          },\n          onClick: handleDrawerOpen,\n          children: \"Dine Venner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n          style: {\n            width: '50px'\n          },\n          anchor: 'bottom',\n          open: drawerOpen,\n          onClose: handleDrawerClose,\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            style: {\n              position: 'absolute',\n              top: '5px',\n              right: '0'\n            },\n            onClick: handleDrawerClose,\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: \"Dine venner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            style: {\n              marginTop: '20px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FriendList, {\n            updateFriends: updateFriends,\n            users: users,\n            friends: friends\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            border: '1px solid lightgrey',\n            marginTop: '5px',\n            width: '90%',\n            marginRight: '20px'\n          },\n          onClick: handleDrawerOpen2,\n          children: \"Dine grupper\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n          style: {\n            width: '50px'\n          },\n          anchor: 'bottom',\n          open: drawerOpen2,\n          onClose: handleDrawerClose2,\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            style: {\n              position: 'absolute',\n              top: '5px',\n              right: '0'\n            },\n            onClick: handleDrawerClose2,\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: \"Dine grupper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            style: {\n              marginTop: '20px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(GroupList, {\n            onClick: handleDrawerClose2,\n            updateGroups: updateGroups,\n            friends: friends,\n            groups: groups,\n            handleGroupClicked: handleGroupClicked\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(FeedCard, {\n          selectedGroup: selectedGroup,\n          updateGroups: updateGroups,\n          leaveGroup: leaveGroup,\n          deleteGroup: deleteGroup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: mobileView ? displayMobile() : displayDesktop()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 12\n  }, this);\n};\n\n_s(GroupsAndFriends, \"N4soR9kZp5zLGlvYfeYnVz3lf9I=\");\n\n_c2 = GroupsAndFriends;\nexport default GroupsAndFriends;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"GroupsAndFriends\");","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/containers/GroupsAndFriends.tsx"],"names":["React","useContext","useEffect","useState","styled","FriendList","GroupList","FeedCard","axios","UserContext","Button","Drawer","IconButton","Divider","CloseIcon","config","Container","div","GroupsAndFriends","friends","setFriends","users","setUsers","groups","setGroups","user","selectedGroup","setSelectedGroup","owner","firstName","surname","userId","email","image","password","phoneNumber","activityLevel","points","groupName","groupId","state","setState","mobileView","drawerOpen","drawerOpen2","setResponsiveness","window","innerWidth","prevState","addEventListener","updateGroups","console","log","url","get","then","response","data","length","catch","error","message","filter","test","Object","values","friendCheck","handleGroupClicked","group","leaveGroup","delete","JSON","stringify","alert","deleteGroup","toString","request","a","forEach","friend","updateFriends","displayDesktop","width","minWidth","marginRight","displayMobile","handleDrawerOpen","handleDrawerClose","handleDrawerOpen2","handleDrawerClose2","border","marginTop","anchor","open","onClose","position","top","right","textAlign"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport FriendList from '../components/GroupsAndFriendsComponents/FriendList';\nimport GroupList from '../components/GroupsAndFriendsComponents/GroupList';\nimport FeedCard from '../components/GroupsAndFriendsComponents/FeedCard';\nimport User from '../interfaces/User';\nimport axios from '../Axios';\nimport { UserContext } from '../UserContext';\nimport Group from '../interfaces/Group';\nimport { Button, Drawer } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport CloseIcon from '@material-ui/icons/Close';\nimport config from '../Config';\n\n\nconst Container = styled.div`\n    display: flex;\n    margin-left: 10px;\n    width: 100%;\n`;\n\nconst GroupsAndFriends = () => {\n    const [friends, setFriends] = useState<User[]>([]);\n    const [users, setUsers] = useState<User[]>([]);\n    const [groups, setGroups] = useState<Group[]>([]);\n    const { user } = useContext(UserContext);\n    const [selectedGroup, setSelectedGroup] = useState<Group>({\n        owner: {\n            firstName: '',\n            surname: '',\n            userId: '',\n            email: '',\n            image: '',\n            password: '',\n            phoneNumber: '',\n            activityLevel: '',\n            points: '',\n        },\n        groupName: '',\n        groupId: '-1',\n        users: [],\n    });\n\n    const [state, setState] = useState({\n        mobileView: false,\n        drawerOpen: false,\n        drawerOpen2: false,\n    });\n\n    const { mobileView, drawerOpen, drawerOpen2 } = state;\n\n    useEffect(() => {\n        const setResponsiveness = () => {\n            return window.innerWidth < 951\n                ? setState((prevState) => ({ ...prevState, mobileView: true }))\n                : setState((prevState) => ({\n                      ...prevState,\n                      mobileView: false,\n                  }));\n        };\n        setResponsiveness();\n        window.addEventListener('resize', () => setResponsiveness());\n    }, []);\n\n    //henter alle dine grupper\n    useEffect(() => {\n        updateGroups();\n    }, []);\n\n    const updateGroups = () => {\n        console.log('oppdaterer');\n        const url = `user/${user}/group`;\n        axios\n            .get(url, config)\n            .then((response) => {\n                setGroups(response.data['groups']);\n                if (\n                    selectedGroup.groupId === '-1' &&\n                    response.data['groups'].length > 0\n                ) {\n                    setSelectedGroup(response.data['groups'][0]);\n                }\n            })\n            .catch((error) => {\n                console.log('Kunne ikke hente dine grupper' + error.message);\n            });\n    };\n\n    //henter alle users\n    useEffect(() => {\n        axios\n            .get('/user')\n            .then((response) => {\n                console.log(response.data);\n                setUsers(\n                    response.data.filter(\n                        (test: { userID: string }) =>\n                            Object.values(test)[0] != user && friendCheck(test)\n                    )\n                );\n            })\n            .catch((error) => console.log(error));\n    }, [friends, user]);\n\n    const handleGroupClicked = (group: Group) => {\n        setSelectedGroup(group);\n    };\n\n    const leaveGroup = () => {\n        const groupId = selectedGroup.groupId;\n        axios\n            .delete(`group/${groupId}/user/${user}`, config)\n            .then((response) => {\n                JSON.stringify(response);\n                console.log(response.data);\n            })\n            .then(() => {\n                updateGroups();\n                setSelectedGroup({\n                    owner: {\n                        firstName: '',\n                        surname: '',\n                        userId: '',\n                        email: '',\n                        image: '',\n                        password: '',\n                        phoneNumber: '',\n                        activityLevel: '',\n                        points: '',\n                    },\n                    groupName: '',\n                    groupId: '0',\n                    users: [],\n                });\n            })\n            .catch((error) => {\n                alert('Du kan ikke forlate gruppen mens du er eier');\n                console.log('Kunne ikke forlate gruppe: ' + error.message);\n            });\n    };\n\n    const deleteGroup = async () => {\n        if ((selectedGroup.owner['userId'].toString() === user)) {\n            const groupId = selectedGroup.groupId;\n            const request = await axios.delete(`/group/${groupId}`, config);\n            setSelectedGroup({\n                owner: {\n                    firstName: '',\n                    surname: '',\n                    userId: '',\n                    email: '',\n                    image: '',\n                    password: '',\n                    phoneNumber: '',\n                    activityLevel: '',\n                    points: '',\n                },\n                groupName: '',\n                groupId: '-1',\n                users: [],\n            });\n            updateGroups();\n            return request;\n        } else {\n            console.log('You must be the owner in order to delete the group.');\n        }\n    };\n\n    //sjekker om user finnes i friends\n    const friendCheck = (test: any) => {\n        let a = true;\n        friends.forEach(function (friend) {\n            if (Object.values(friend)[0] === Object.values(test)[0]) {\n                a = false;\n            }\n        });\n        return a;\n    };\n\n    const updateFriends = () => {\n        axios\n            .get(`/user/${user}/user`, config)\n            .then((response) => {\n                console.log('Venner:');\n                console.log(response.data['users']);\n                setFriends(response.data['users']);\n            })\n            .catch((error) => console.log(error));\n    };\n    //henter ut alle venner\n    useEffect(() => {\n        updateFriends();\n    }, [user]);\n\n    const displayDesktop = () => {\n        return (\n            <Container>\n                <div style={{ width: '20%', minWidth: '200px' }}>\n                    <FriendList\n                        updateFriends={updateFriends}\n                        users={users}\n                        friends={friends}\n                    />\n                </div>\n                <div style={{ width: '57%' }}>\n                    <FeedCard\n                        selectedGroup={selectedGroup}\n                        updateGroups={updateGroups}\n                        leaveGroup={leaveGroup}\n                        deleteGroup={deleteGroup}\n                    ></FeedCard>\n                </div>\n                <div\n                    style={{\n                        width: '20%',\n                        minWidth: '200px',\n                        marginRight: '20px',\n                    }}\n                >\n                    <GroupList\n                        updateGroups={updateGroups}\n                        friends={friends}\n                        groups={groups}\n                        handleGroupClicked={handleGroupClicked}\n                    />\n                </div>\n            </Container>\n        );\n    };\n\n    const displayMobile = () => {\n        const handleDrawerOpen = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen: true }));\n\n        const handleDrawerClose = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen: false }));\n\n        const handleDrawerOpen2 = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen2: true }));\n\n        const handleDrawerClose2 = () =>\n            setState((prevState) => ({ ...prevState, drawerOpen2: false }));\n\n        return (\n            <div>\n                <Container>\n                    <Button\n                        style={{\n                            border: '1px solid lightgrey',\n                            marginTop: '5px',\n                            width: '90%',\n                            marginRight: '5px',\n                        }}\n                        onClick={handleDrawerOpen}\n                    >\n                        Dine Venner\n                    </Button>\n                    <Drawer\n                        style={{ width: '50px' }}\n                        {...{\n                            anchor: 'bottom',\n                            open: drawerOpen,\n                            onClose: handleDrawerClose,\n                        }}\n                    >\n                        <br />\n                        <IconButton\n                            style={{\n                                position: 'absolute',\n                                top: '5px',\n                                right: '0',\n                            }}\n                            onClick={handleDrawerClose}\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <b style={{ textAlign: 'center' }}>Dine venner</b>\n                        <Divider style={{ marginTop: '20px' }} />\n                        <FriendList\n                            updateFriends={updateFriends}\n                            users={users}\n                            friends={friends}\n                        />\n                    </Drawer>\n\n                    <Button\n                        style={{\n                            border: '1px solid lightgrey',\n                            marginTop: '5px',\n                            width: '90%',\n                            marginRight: '20px',\n                        }}\n                        onClick={handleDrawerOpen2}\n                    >\n                        Dine grupper\n                    </Button>\n                    <Drawer\n                        style={{ width: '50px' }}\n                        {...{\n                            anchor: 'bottom',\n                            open: drawerOpen2,\n                            onClose: handleDrawerClose2,\n                        }}\n                    >\n                        <br />\n                        <IconButton\n                            style={{\n                                position: 'absolute',\n                                top: '5px',\n                                right: '0',\n                            }}\n                            onClick={handleDrawerClose2}\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <b style={{ textAlign: 'center' }}>Dine grupper</b>\n                        <Divider style={{ marginTop: '20px' }} />\n                        <GroupList\n                            onClick={handleDrawerClose2}\n                            updateGroups={updateGroups}\n                            friends={friends}\n                            groups={groups}\n                            handleGroupClicked={handleGroupClicked}\n                        />\n                    </Drawer>\n                </Container>\n                <div style={{ width: '100%' }}>\n                    <FeedCard\n                        selectedGroup={selectedGroup}\n                        updateGroups={updateGroups}\n                        leaveGroup={leaveGroup}\n                        deleteGroup={deleteGroup}\n                    ></FeedCard>\n                </div>\n            </div>\n        );\n    };\n\n    return <div>{mobileView ? displayMobile() : displayDesktop()}</div>;\n};\n\nexport default GroupsAndFriends;\n"]},"metadata":{},"sourceType":"module"}