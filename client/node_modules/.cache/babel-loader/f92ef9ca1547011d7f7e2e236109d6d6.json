{"ast":null,"code":"import _objectSpread from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useContext,useState}from'react';import styled from'styled-components';import{TextField,Button}from'@material-ui/core';import Autocomplete from'@material-ui/lab/Autocomplete';import AddBox from'@material-ui/icons/AddBox';import axios from'../../Axios';import{UserContext}from'../../UserContext';import{Groups}from'./Groups';import config from'../../Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    margin-left: 1rem;\\n    margin-top: 1rem;\\n    width: 95%;\\n\"])));var GroupList=function GroupList(_ref){var friends=_ref.friends,groups=_ref.groups,handleGroupClicked=_ref.handleGroupClicked,updateGroups=_ref.updateGroups;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchInput=_useState2[0],setSearchInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectInput=_useState4[0],setSelectInput=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),chosenGroupName=_useState6[0],setChosenGroupName=_useState6[1];var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),searchValue=_React$useState2[0],setSearchValue=_React$useState2[1];var _useContext=useContext(UserContext),user=_useContext.user;var onSearchChange=function onSearchChange(event){setSearchInput(event.target.value);};var onGroupNameChange=function onGroupNameChange(event){setChosenGroupName(event.target.value);};var onAddGroupClick=function onAddGroupClick(){console.log(selectInput);console.log(chosenGroupName);//console.log(getUserIds(selectInput));\nconsole.log('searchInput: '+searchValue);if(selectInput===null){alert('Du må legge noen til i gruppen');}else if(chosenGroupName===''){alert('Du må skrive et gruppenavn');}else{postGroup();setSelectInput([]);setSearchValue('');}};var getUserIds=function getUserIds(selectInput){var userIds=[];selectInput.forEach(function(input){return userIds.push(Object.values(input)[0]);});return userIds;};var postGroup=function postGroup(){console.log(getUserIds(selectInput).toString());axios.post(\"/group\",{groupName:chosenGroupName,userIds:getUserIds(selectInput).toString(),userId:user},config).then(function(response){JSON.stringify(response);console.log(response.data);}).then(updateGroups).catch(function(error){console.log(error.response.data);alert('Fikk ikke opprettet gruppen');});};return/*#__PURE__*/_jsxs(StyledContainer,{children:[/*#__PURE__*/_jsx(TextField,{style:{marginTop:'5px'},onChange:onGroupNameChange,fullWidth:true,label:\"Gruppenavn\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Autocomplete,{id:\"free-solo-demo\",value:selectInput,multiple:true,noOptionsText:\"ingen valg\",onChange:function onChange(event,newValue){setSelectInput(newValue);},inputValue:searchValue,onInputChange:function onInputChange(event,newInputValue){setSearchValue(newInputValue);},options:friends,getOptionLabel:function getOptionLabel(options){return options.firstName+' '+options.surname;},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Legg til medlemmer\",margin:\"normal\",variant:\"outlined\"}));}}),/*#__PURE__*/_jsxs(Button,{onClick:onAddGroupClick,variant:\"contained\",disabled:selectInput.length===0,color:\"primary\",style:{width:'100%'},children:[\"Lag gruppe\",/*#__PURE__*/_jsx(AddBox,{style:{marginLeft:'8px'}})]}),/*#__PURE__*/_jsx(TextField,{style:{marginTop:'5px'},onChange:onSearchChange,fullWidth:true,label:\"S\\xF8k etter grupper\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Groups,{groups:groups,handleGroupClicked:handleGroupClicked,searchInput:searchInput})]});};export default GroupList;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/components/GroupsAndFriendsComponents/GroupList.tsx"],"names":["React","useContext","useState","styled","TextField","Button","Autocomplete","AddBox","axios","UserContext","Groups","config","StyledContainer","div","GroupList","friends","groups","handleGroupClicked","updateGroups","searchInput","setSearchInput","selectInput","setSelectInput","chosenGroupName","setChosenGroupName","searchValue","setSearchValue","user","onSearchChange","event","target","value","onGroupNameChange","onAddGroupClick","console","log","alert","postGroup","getUserIds","userIds","forEach","input","push","Object","values","toString","post","groupName","userId","then","response","JSON","stringify","data","catch","error","marginTop","newValue","newInputValue","options","firstName","surname","params","length","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, useContext, useState } from 'react';\nimport styled from 'styled-components';\nimport { TextField, Button } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport AddBox from '@material-ui/icons/AddBox';\nimport User from '../../interfaces/User';\nimport axios from '../../Axios';\nimport { UserContext } from '../../UserContext';\nimport Group from '../../interfaces/Group';\nimport { Groups } from './Groups';\nimport config from '../../Config';\n\nconst StyledContainer = styled.div`\n    margin-left: 1rem;\n    margin-top: 1rem;\n    width: 95%;\n`;\n\n\ninterface Props {\n    friends: User[];\n    groups: Group[];\n    handleGroupClicked: (group: Group) => void;\n    updateGroups: () => void;\n    onClick?: () => void;\n}\n\nconst GroupList = ({\n    friends,\n    groups,\n    handleGroupClicked,\n    updateGroups,\n}: Props) => {\n    const [searchInput, setSearchInput] = useState<string>('');\n    const [selectInput, setSelectInput] = useState<User[]>([]);\n    const [chosenGroupName, setChosenGroupName] = useState<string>('');\n    const [searchValue, setSearchValue] = React.useState('');\n    const { user } = useContext(UserContext);\n\n    const onSearchChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setSearchInput((event.target as HTMLInputElement).value);\n    };\n\n    const onGroupNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setChosenGroupName((event.target as HTMLInputElement).value);\n    };\n\n    const onAddGroupClick = () => {\n        console.log(selectInput);\n        console.log(chosenGroupName);\n        //console.log(getUserIds(selectInput));\n\n        console.log('searchInput: ' + searchValue);\n        if (selectInput === null) {\n            alert('Du må legge noen til i gruppen');\n        } else if (chosenGroupName === '') {\n            alert('Du må skrive et gruppenavn');\n        } else {\n            postGroup();\n            setSelectInput([]);\n            setSearchValue('');\n        }\n    };\n\n    const getUserIds = (selectInput: User[]) => {\n        const userIds: string[] = [];\n        selectInput.forEach((input) => userIds.push(Object.values(input)[0]));\n        return userIds;\n    };\n\n    const postGroup = () => {\n        console.log(getUserIds(selectInput).toString());\n        axios\n            .post(`/group`, {\n                groupName: chosenGroupName,\n                userIds: getUserIds(selectInput).toString(),\n                userId: user,\n            }, config)\n            .then((response) => {\n                JSON.stringify(response);\n                console.log(response.data);\n            })\n            .then(updateGroups)\n            .catch((error) => {\n                console.log(error.response.data);\n                alert('Fikk ikke opprettet gruppen');\n            });\n    };\n\n    return (\n        <StyledContainer>\n            <TextField\n                style={{ marginTop: '5px' }}\n                onChange={onGroupNameChange}\n                fullWidth={true}\n                label=\"Gruppenavn\"\n                variant=\"outlined\"\n            />\n            <Autocomplete\n                id=\"free-solo-demo\"\n                value={selectInput}\n                multiple\n                noOptionsText=\"ingen valg\"\n                onChange={(event: any, newValue: User[]) => {\n                    setSelectInput(newValue);\n                }}\n                inputValue={searchValue}\n                onInputChange={(event, newInputValue) => {\n                    setSearchValue(newInputValue);\n                }}\n                options={friends}\n                getOptionLabel={(options) =>\n                    options.firstName + ' ' + options.surname\n                }\n                renderInput={(params) => (\n                    <TextField\n                        {...params}\n                        label=\"Legg til medlemmer\"\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                    />\n                )}\n            />\n            <Button\n                onClick={onAddGroupClick}\n                variant=\"contained\"\n                disabled={selectInput.length === 0}\n                color=\"primary\"\n                style={{ width: '100%' }}\n            >\n                Lag gruppe\n                <AddBox style={{ marginLeft: '8px' }}></AddBox>\n            </Button>\n\n            <TextField\n                style={{ marginTop: '5px' }}\n                onChange={onSearchChange}\n                fullWidth={true}\n                label=\"Søk etter grupper\"\n                variant=\"outlined\"\n            />\n            <Groups\n                groups={groups}\n                handleGroupClicked={handleGroupClicked}\n                searchInput={searchInput}\n            />\n        </StyledContainer>\n    );\n};\n\nexport default GroupList;\n"]},"metadata":{},"sourceType":"module"}