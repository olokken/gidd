{"ast":null,"code":"import _toConsumableArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'../Axios';import React,{useContext,useEffect,useState}from'react';import GroupLeaderboard from'../components/LeaderboardComponents/GroupLeaderboard';import{UserContext}from'../UserContext';import{makeStyles,Paper,Tab,Tabs}from'@material-ui/core';import{Groups}from'../components/GroupsAndFriendsComponents/Groups';import config from'../Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{flexGrow:1}});function Leaderboard(){var classes=useStyles();var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),yourGroups=_useState2[0],setYourGroups=_useState2[1];var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),friends=_useState4[0],setFriends=_useState4[1];var _useState5=useState({owner:{firstName:'',surname:'',userId:'',email:'',image:'',password:'',phoneNumber:'',activityLevel:'',points:''},groupName:'',groupId:'',users:[]}),_useState6=_slicedToArray(_useState5,2),selectedGroup=_useState6[0],setSelectedGroup=_useState6[1];var getYourGroups=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var request;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/user/\".concat(user,\"/group\"),config);case 2:request=_context.sent;setYourGroups(request.data.groups);return _context.abrupt(\"return\",request);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getYourGroups(){return _ref.apply(this,arguments);};}();var getFriends=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var request;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/user/\".concat(user,\"/user\"),config);case 2:request=_context2.sent;return _context2.abrupt(\"return\",request);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getFriends(){return _ref2.apply(this,arguments);};}();var getUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var request;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"/user/\".concat(user),config);case 2:request=_context3.sent;return _context3.abrupt(\"return\",request);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function getUser(){return _ref3.apply(this,arguments);};}();var handleChange=function handleChange(event,newValue){setValue(newValue);};var handleGroupClicked=function handleGroupClicked(group){setSelectedGroup(group);};useEffect(function(){Promise.all([getFriends(),getUser()]).then(function(response){setFriends(response[0].data.users);setFriends(function(friends){return[].concat(_toConsumableArray(friends),[response[1].data]);});});getYourGroups();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{margin:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Paper,{className:classes.root,children:/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:handleChange,indicatorColor:\"primary\",textColor:\"primary\",centered:true,children:[/*#__PURE__*/_jsx(Tab,{label:\"Dine venner\"}),/*#__PURE__*/_jsx(Tab,{label:\"Dine grupper\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:value===0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GroupLeaderboard,{users:friends,title:\"Dine venner\"})})}),value===1&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'20%'},children:yourGroups.length===0?/*#__PURE__*/_jsxs(\"h5\",{children:[\"Du har ingen grupper enda. Vennligst legg til under \",/*#__PURE__*/_jsx(\"q\",{children:\"grupper og venner\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Dine grupper\"}),/*#__PURE__*/_jsx(Groups,{groups:yourGroups,handleGroupClicked:handleGroupClicked})]})}),selectedGroup.groupId!==''&&/*#__PURE__*/_jsx(\"div\",{style:{flex:'1'},children:/*#__PURE__*/_jsx(GroupLeaderboard,{users:selectedGroup.users,title:selectedGroup.groupName})})]})]})]});}export default Leaderboard;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/containers/Leaderboard.tsx"],"names":["axios","React","useContext","useEffect","useState","GroupLeaderboard","UserContext","makeStyles","Paper","Tab","Tabs","Groups","config","useStyles","root","flexGrow","Leaderboard","classes","user","yourGroups","setYourGroups","value","setValue","friends","setFriends","owner","firstName","surname","userId","email","image","password","phoneNumber","activityLevel","points","groupName","groupId","users","selectedGroup","setSelectedGroup","getYourGroups","get","request","data","groups","getFriends","getUser","handleChange","event","newValue","handleGroupClicked","group","Promise","all","then","response","margin","display","width","length","flex"],"mappings":"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","sourcesContent":["import axios from '../Axios';\nimport React, { ChangeEvent, useContext, useEffect, useState } from 'react';\nimport GroupLeaderboard from '../components/LeaderboardComponents/GroupLeaderboard';\nimport Group from '../interfaces/Group';\nimport { UserContext } from '../UserContext';\nimport { makeStyles, Paper, Tab, Tabs } from '@material-ui/core';\nimport User from '../interfaces/User';\nimport { Groups } from '../components/GroupsAndFriendsComponents/Groups';\nimport config from '../Config';\n\nconst useStyles = makeStyles({\n    root: {\n        flexGrow: 1,\n    },\n});\n\nfunction Leaderboard() {\n    const classes = useStyles();\n    const { user } = useContext(UserContext);\n    const [yourGroups, setYourGroups] = useState<Group[]>([]);\n    const [value, setValue] = React.useState(0);\n    const [friends, setFriends] = useState<User[]>([]);\n    const [selectedGroup, setSelectedGroup] = useState<Group>({\n        owner: {\n            firstName: '',\n            surname: '',\n            userId: '',\n            email: '',\n            image: '',\n            password: '',\n            phoneNumber: '',\n            activityLevel: '',\n            points: '',\n        },\n        groupName: '',\n        groupId: '',\n        users: [],\n    });\n\n    const getYourGroups = async () => {\n        const request = await axios.get(`/user/${user}/group`, config);\n        setYourGroups(request.data.groups);\n        return request;\n    };\n\n    const getFriends = async () => {\n        const request = await axios.get(`/user/${user}/user`, config);\n        return request;\n    };\n\n    const getUser = async () => {\n        const request = await axios.get(`/user/${user}`, config);\n        return request;\n    };\n\n    const handleChange = (\n        event: ChangeEvent<Record<string, unknown>>,\n        newValue: number\n    ) => {\n        setValue(newValue);\n    };\n\n    const handleGroupClicked = (group: Group) => {\n        setSelectedGroup(group);\n    };\n\n    useEffect(() => {\n        Promise.all([getFriends(), getUser()]).then((response) => {\n            setFriends(response[0].data.users);\n            setFriends((friends) => [...friends, response[1].data]);\n        });\n        getYourGroups();\n    }, []);\n\n    return (\n        <div style={{ margin: '1rem' }}>\n            <div>\n                <Paper className={classes.root}>\n                    <Tabs\n                        value={value}\n                        onChange={handleChange}\n                        indicatorColor=\"primary\"\n                        textColor=\"primary\"\n                        centered\n                    >\n                        <Tab label=\"Dine venner\"></Tab>\n                        <Tab label=\"Dine grupper\"></Tab>\n                    </Tabs>\n                </Paper>\n            </div>\n            <div>\n                <div>\n                    {value === 0 && (\n                        <div>\n                            <GroupLeaderboard\n                                users={friends}\n                                title=\"Dine venner\"\n                            />\n                        </div>\n                    )}\n                </div>\n                {value === 1 && (\n                    <div style={{ display: 'flex' }}>\n                        <div style={{ width: '20%' }}>\n                            {yourGroups.length === 0 ? (\n                                <h5>\n                                    Du har ingen grupper enda. Vennligst legg\n                                    til under <q>grupper og venner</q>\n                                </h5>\n                            ) : (\n                                <div>\n                                    <h2>Dine grupper</h2>\n                                    <Groups\n                                        groups={yourGroups}\n                                        handleGroupClicked={handleGroupClicked}\n                                    />\n                                </div>\n                            )}\n                        </div>\n                        {selectedGroup.groupId !== '' && (\n                            <div style={{ flex: '1' }}>\n                                <GroupLeaderboard\n                                    users={selectedGroup.users}\n                                    title={selectedGroup.groupName}\n                                />\n                            </div>\n                        )}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default Leaderboard;\n"]},"metadata":{},"sourceType":"module"}