{"ast":null,"code":"import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Card,makeStyles}from'@material-ui/core';import'./GroupLeaderboard.css';import UserAvatar from'../UserAvatar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{minWidth:150,margin:'3rem 1rem'},bullet:{display:'inline-block',margin:'0 2px',transform:'scale(0.8)'},title:{fontSize:14},pos:{marginBottom:12}});var GroupLeaderboard=function GroupLeaderboard(_ref){var title=_ref.title,users=_ref.users;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),placements=_useState2[0],setPlacements=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPoints=_useState4[0],setTotalPoints=_useState4[1];var classes=useStyles();var sortPoints=function sortPoints(){return users.sort(function(u1,u2){if(u1.points>u2.points)return-1;else if(u1.points<u2.points)return 1;else return 0;});};var getPosition=function getPosition(user){var position=0;placements.forEach(function(p){if(p.user===user)position=p.position;});return position;};var getPlacements=function getPlacements(){var placements=[];var sorted=sortPoints();for(var i=0;i<sorted.length;i++){placements.push({user:sorted[i],position:1});}var currentPos=1;var nextPos=1;for(var _i=0;_i<placements.length-1;_i++){placements[_i].position=currentPos;nextPos++;if(+placements[_i].user.points>+placements[_i+1].user.points){currentPos=nextPos;}if(_i===placements.length-2){placements[_i+1].position=currentPos;}}setPlacements(placements);};var getTotalPoints=function getTotalPoints(){var sum=0;users.forEach(function(user){sum+=+user.points;});setTotalPoints(sum);};//The max margin-left is 52rem\nvar getMarginLeft=function getMarginLeft(user){if(users.length>5)return+user.points/totalPoints*250;else return+user.points/totalPoints*60;};useEffect(function(){getPlacements();getTotalPoints();console.log(' ');},[users]);var renderPlayers=users.map(function(user,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"groupleaderboard__players\",children:[/*#__PURE__*/_jsx(\"hr\",{className:\"groupleaderboard__line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"groupleaderboard__player\",children:[/*#__PURE__*/_jsxs(\"div\",{/* The max margin-left is 52rem on full size*/style:{margin:\"0.7rem 0.5rem 0.5rem\",marginLeft:users.length===0?'0.5rem':\"\".concat(getMarginLeft(user),\"%\"),display:'flex',flex:'1'},children:[/*#__PURE__*/_jsx(UserAvatar,{user:user,type:\"small\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"groupleaderboard__name\",children:user.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"groupleaderboard__stats\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"groupleaderboard__stat1\",children:[getPosition(user),\"rd Place\"]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"groupleaderboard__stat2\",children:[user.points,\" points\"]})]})]})]},index);});return/*#__PURE__*/_jsxs(Card,{className:classes.root,children:[title!==undefined&&/*#__PURE__*/_jsx(\"div\",{className:\"groupleaderboard__header\",children:/*#__PURE__*/_jsx(\"h1\",{children:title})}),renderPlayers,/*#__PURE__*/_jsx(\"hr\",{className:\"groupleaderboard__line\"})]});};export default GroupLeaderboard;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/components/LeaderboardComponents/GroupLeaderboard.tsx"],"names":["React","useEffect","useState","Card","makeStyles","UserAvatar","useStyles","root","minWidth","margin","bullet","display","transform","title","fontSize","pos","marginBottom","GroupLeaderboard","users","placements","setPlacements","totalPoints","setTotalPoints","classes","sortPoints","sort","u1","u2","points","getPosition","user","position","forEach","p","getPlacements","sorted","i","length","push","currentPos","nextPos","getTotalPoints","sum","getMarginLeft","console","log","renderPlayers","map","index","marginLeft","flex","firstName","undefined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport User from '../../interfaces/User';\nimport { Card, makeStyles } from '@material-ui/core';\nimport './GroupLeaderboard.css';\nimport UserAvatar from '../UserAvatar';\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 150,\n        margin: '3rem 1rem',\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n});\ninterface Props {\n    title?: string;\n    users: User[];\n}\n\nexport interface Placements {\n    user: User;\n    position: number;\n}\n\nconst GroupLeaderboard: React.FC<Props> = ({ title, users }: Props) => {\n    const [placements, setPlacements] = useState<Placements[]>([]);\n    const [totalPoints, setTotalPoints] = useState<number>(0);\n    const classes = useStyles();\n\n    const sortPoints = (): User[] => {\n        return users.sort((u1, u2) => {\n            if (u1.points > u2.points) return -1;\n            else if (u1.points < u2.points) return 1;\n            else return 0;\n        });\n    };\n\n    const getPosition = (user: User): number => {\n        let position = 0;\n        placements.forEach((p) => {\n            if (p.user === user) position = p.position;\n        });\n        return position;\n    };\n\n    const getPlacements = () => {\n        const placements: Placements[] = [];\n        const sorted = sortPoints();\n        for (let i = 0; i < sorted.length; i++) {\n            placements.push({ user: sorted[i], position: 1 });\n        }\n        let currentPos = 1;\n        let nextPos = 1;\n        for (let i = 0; i < placements.length - 1; i++) {\n            placements[i].position = currentPos;\n            nextPos++;\n            if (+placements[i].user.points > +placements[i + 1].user.points) {\n                currentPos = nextPos;\n            }\n            if (i === placements.length - 2) {\n                placements[i + 1].position = currentPos;\n            }\n        }\n        setPlacements(placements);\n    };\n\n    const getTotalPoints = () => {\n        let sum = 0;\n        users.forEach((user) => {\n            sum += +user.points;\n        });\n        setTotalPoints(sum);\n    };\n\n    //The max margin-left is 52rem\n    const getMarginLeft = (user: User) => {\n        if (users.length > 5) return (+user.points / totalPoints) * 250;\n        else return (+user.points / totalPoints) * 60;\n    };\n\n    useEffect(() => {\n        getPlacements();\n        getTotalPoints();\n        console.log(' ');\n    }, [users]);\n\n    const renderPlayers = users.map((user, index: number) => {\n        return (\n            <div className=\"groupleaderboard__players\" key={index}>\n                <hr className=\"groupleaderboard__line\" />\n                <div className=\"groupleaderboard__player\">\n                    <div\n                        /* The max margin-left is 52rem on full size*/\n                        style={{\n                            margin: `0.7rem 0.5rem 0.5rem`,\n                            marginLeft:\n                                users.length === 0\n                                    ? '0.5rem'\n                                    : `${getMarginLeft(user)}%`,\n                            display: 'flex',\n                            flex: '1',\n                        }}\n                    >\n                        <UserAvatar user={user} type=\"small\"></UserAvatar>\n                        <h6 className=\"groupleaderboard__name\">\n                            {user.firstName}\n                        </h6>\n                    </div>\n                    <div className=\"groupleaderboard__stats\">\n                        <h5 className=\"groupleaderboard__stat1\">\n                            {getPosition(user)}rd Place\n                        </h5>\n                        <h5 className=\"groupleaderboard__stat2\">\n                            {user.points} points\n                        </h5>\n                    </div>\n                </div>\n            </div>\n        );\n    });\n\n    return (\n        <Card className={classes.root}>\n            {title !== undefined && (\n                <div className=\"groupleaderboard__header\">\n                    <h1>{title}</h1>\n                </div>\n            )}\n            {renderPlayers}\n            <hr className=\"groupleaderboard__line\" />\n        </Card>\n    );\n};\n\nexport default GroupLeaderboard;\n"]},"metadata":{},"sourceType":"module"}