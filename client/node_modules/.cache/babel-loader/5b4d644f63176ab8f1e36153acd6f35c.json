{"ast":null,"code":"import _regeneratorRuntime from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState}from'react';import{useHistory}from'react-router';import styled from'styled-components';import NewUserCard from'../components/CardComponents/NewUserCard';import axios from'../Axios';import{jsx as _jsx}from\"react/jsx-runtime\";var NewUsernContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    height: 100vh;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    background: #334d50; /* fallback for old browsers */\\n    background: -webkit-linear-gradient(\\n        to bottom,\\n        #1d4350, #a43931\\n    ); /* Chrome 10-25, Safari 5.1-6 */\\n    background: linear-gradient(\\n        to bottom,\\n        #1d4350, #a43931\\n    ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\\n\"])));var NewUser=function NewUser(){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),surname=_useState4[0],setSurname=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),number=_useState8[0],setNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),activityLevel=_useState12[0],setActivityLevel=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),password1=_useState14[0],setPassword1=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),password2=_useState16[0],setPassword2=_useState16[1];var equalPasswords=password1===password2?true:false;var correctEmailFormat=email.indexOf('@')>-1?true:false;var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),visualActivityLevel=_useState18[0],setVisualActivityLevel=_useState18[1];var createUser=function createUser(firstName,surname,email,number,password,image){if(!equalPasswords&&password1!==''){alert('Passordene er ulike');return false;}else{axios.post('/user',{email:email,password:password,firstName:firstName,surname:surname,phoneNumber:number,activityLevel:activityLevel.toUpperCase(),image:image}).then(function(response){console.log(response);}).then(function(){return history.push('/Activities');}).catch(function(error){if(error.response){alert('En bruker med denne E-mailen finnes allerede');}});return true;}};var goBack=function goBack(){history.push('/');};var onChangeEmail=function onChangeEmail(event){var currentEmail=event.target.value;setEmail(currentEmail);};var onChangeFirstName=function onChangeFirstName(event){setFirstName(event.target.value);};var onChangeSurname=function onChangeSurname(event){setSurname(event.target.value);};var onChangeNumber=function onChangeNumber(event){setNumber(event.target.value);};var onChangeActivityLevel=function onChangeActivityLevel(event){setVisualActivityLevel(event.target.value);var actLevel=event.target.value;if(actLevel==='Lav'){actLevel='Low';}else if(actLevel==='Middels'){actLevel='Medium';}else{actLevel='High';}setActivityLevel(actLevel);};var onChangePassword1=function onChangePassword1(event){setPassword1(event.target.value);};var onChangePassword2=function onChangePassword2(event){setPassword2(event.target.value);};var onChangeImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var file,base64;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(event);if(!(event.target.files!=null)){_context.next=10;break;}file=event.target.files[0];console.log(file);_context.next=6;return convertBase64(file);case 6:base64=_context.sent;console.log(base64);setImage(base64);console.log(image);case 10:case\"end\":return _context.stop();}}},_callee);}));return function onChangeImage(_x){return _ref.apply(this,arguments);};}();var convertBase64=function convertBase64(file){return new Promise(function(resolve,reject){var fileReader=new FileReader();fileReader.readAsDataURL(file);fileReader.onload=function(){resolve(fileReader.result);};fileReader.onerror=function(error){reject(error);};});};var onClick=function onClick(){if(equalPasswords){createUser(firstName,surname,email,number,password1,image);}else{alert('Noe gikk galt');}};return/*#__PURE__*/_jsx(NewUsernContainer,{children:/*#__PURE__*/_jsx(NewUserCard,{onChangeFirstName:onChangeFirstName,onChangeSurname:onChangeSurname,onChangeActivityLevel:onChangeActivityLevel,activityLevel:activityLevel,visualActivityLevel:visualActivityLevel,onChangeEmail:onChangeEmail,onChangeNumber:onChangeNumber,onChangePassword1:onChangePassword1,onChangePassword2:onChangePassword2,onClick:onClick,equalPasswords:equalPasswords,correctEmailFormat:correctEmailFormat,email:email,goBack:goBack,image:image,onChangeImage:onChangeImage})});};export default NewUser;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/containers/NewUser.tsx"],"names":["React","useState","useHistory","styled","NewUserCard","axios","NewUsernContainer","div","NewUser","history","firstName","setFirstName","surname","setSurname","email","setEmail","number","setNumber","image","setImage","activityLevel","setActivityLevel","password1","setPassword1","password2","setPassword2","equalPasswords","correctEmailFormat","indexOf","visualActivityLevel","setVisualActivityLevel","createUser","password","alert","post","phoneNumber","toUpperCase","then","response","console","log","push","catch","error","goBack","onChangeEmail","event","currentEmail","target","value","onChangeFirstName","onChangeSurname","onChangeNumber","onChangeActivityLevel","actLevel","onChangePassword1","onChangePassword2","onChangeImage","files","file","convertBase64","base64","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","onClick"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport styled from 'styled-components';\nimport NewUserCard from '../components/CardComponents/NewUserCard';\nimport axios from '../Axios';\n\nconst NewUsernContainer = styled.div`\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #334d50; /* fallback for old browsers */\n    background: -webkit-linear-gradient(\n        to bottom,\n        #1d4350, #a43931\n    ); /* Chrome 10-25, Safari 5.1-6 */\n    background: linear-gradient(\n        to bottom,\n        #1d4350, #a43931\n    ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n`;\n\nconst NewUser = () => {\n    const history = useHistory();\n    const [firstName, setFirstName] = useState<string>('');\n    const [surname, setSurname] = useState<string>('');\n    const [email, setEmail] = useState<string>('');\n    const [number, setNumber] = useState<string>('');\n    const [image, setImage] = useState<string>('');\n    const [activityLevel, setActivityLevel] = useState<string>('');\n    const [password1, setPassword1] = useState<string>('');\n    const [password2, setPassword2] = useState<string>('');\n    const equalPasswords: boolean = password1 === password2 ? true : false;\n    const correctEmailFormat = email.indexOf('@') > -1 ? true : false;\n    const [visualActivityLevel, setVisualActivityLevel] = useState<string>('');\n\n    const createUser = (\n        firstName: string,\n        surname: string,\n        email: string,\n        number: string,\n        password: string,\n        image: string\n    ): boolean => {\n        if (!equalPasswords && password1 !== '') {\n            alert('Passordene er ulike');\n            return false;\n        } else {\n            axios\n                .post('/user', {\n                    email: email,\n                    password: password,\n                    firstName: firstName,\n                    surname: surname,\n                    phoneNumber: number,\n                    activityLevel: activityLevel.toUpperCase(),\n                    image: image,\n                })\n                .then((response) => {\n                    console.log(response)\n                }).\n                then(() => history.push('/Activities')\n                ).catch((error) => {\n                    if (error.response) {\n                        alert('En bruker med denne E-mailen finnes allerede')\n                    }\n                });\n            return true;\n        }\n    };\n\n    const goBack = () => {\n        history.push('/')\n    }\n\n    const onChangeEmail = (event: ChangeEvent<HTMLInputElement>) => {\n        const currentEmail: string = (event.target as HTMLInputElement).value;\n        setEmail(currentEmail);\n    };\n\n    const onChangeFirstName = (event: ChangeEvent<HTMLInputElement>) => {\n        setFirstName((event.target as HTMLInputElement).value);\n    };\n\n    const onChangeSurname = (event: ChangeEvent<HTMLInputElement>) => {\n        setSurname((event.target as HTMLInputElement).value);\n    };\n\n    const onChangeNumber = (event: ChangeEvent<HTMLInputElement>) => {\n        setNumber((event.target as HTMLInputElement).value);\n    };\n\n    const onChangeActivityLevel = (event: ChangeEvent<HTMLInputElement>) => {\n        setVisualActivityLevel((event.target as HTMLInputElement).value)\n        let actLevel = (event.target as HTMLInputElement).value\n        if (actLevel === 'Lav') {\n            actLevel = 'Low'\n        } else if (actLevel === 'Middels') {\n            actLevel = 'Medium'\n        } else {\n            actLevel = 'High'\n        }\n        setActivityLevel(actLevel);\n    };\n\n    const onChangePassword1 = (event: ChangeEvent<HTMLInputElement>) => {\n        setPassword1((event.target as HTMLInputElement).value);\n    };\n    const onChangePassword2 = (event: ChangeEvent<HTMLInputElement>) => {\n        setPassword2((event.target as HTMLInputElement).value);\n    };\n\n    const onChangeImage = async (\n        event: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        console.log(event);\n        if (event.target.files != null) {\n            const file: File = event.target.files[0];\n            console.log(file);\n            const base64 = await convertBase64(file);\n            console.log(base64);\n            setImage(base64);\n            console.log(image)\n        }\n    };\n\n    const convertBase64 = (file: File) => {\n        return new Promise<any>((resolve, reject) => {\n\n            const fileReader = new FileReader();\n            fileReader.readAsDataURL(file);\n\n            fileReader.onload = (() => {\n                resolve(fileReader.result);\n            });\n            fileReader.onerror = ((error) => {\n                reject(error);\n            });\n        });\n    };\n\n    const onClick = () => {\n        if (equalPasswords) {\n            createUser(firstName, surname, email, number, password1, image);\n        } else {\n            alert('Noe gikk galt');\n        }\n    };\n\n    return (\n        <NewUsernContainer>\n            <NewUserCard\n                onChangeFirstName={onChangeFirstName}\n                onChangeSurname={onChangeSurname}\n                onChangeActivityLevel={onChangeActivityLevel}\n                activityLevel={activityLevel}\n                visualActivityLevel={visualActivityLevel}\n                onChangeEmail={onChangeEmail}\n                onChangeNumber={onChangeNumber}\n                onChangePassword1={onChangePassword1}\n                onChangePassword2={onChangePassword2}\n                onClick={onClick}\n                equalPasswords={equalPasswords}\n                correctEmailFormat={correctEmailFormat}\n                email={email}\n                goBack={goBack}\n                image={image}\n                onChangeImage={onChangeImage}\n            ></NewUserCard>\n        </NewUsernContainer>\n    );\n};\n\nexport default NewUser;\n"]},"metadata":{},"sourceType":"module"}