{"ast":null,"code":"import _toConsumableArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/olelokken/DEV/gidd/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useContext,useEffect,useState}from'react';import FullCalendar from'@fullcalendar/react';import dayGridPlugin from'@fullcalendar/daygrid';import timeGridPlugin from'@fullcalendar/timegrid';import interactionPlugin from'@fullcalendar/interaction';import axios from'../Axios';import styled from'styled-components';import{UserContext}from'../UserContext';import Popup from'../components/Popup';import ActivityInformation from'../components/ActivityComponents/ActivityInformation';import config from'../Config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CalendarContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    --fc-button-bg-color: #f44336;\\n    --fc-button-active-bg-color: #f44336;\\n    --fc-button-hover-bg-color: #f66055;\\n    --fc-today-bg-color: #fde9e7;\\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\\n        'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\\n        'Helvetica Neue', sans-serif;\\n    --fc-event-font-size: 50px;\\n\"])));var todayStr=new Date().toISOString().replace(/T.*$/,'')+'T'+new Date().toLocaleTimeString();var Calender=function Calender(){var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),activities=_useState2[0],setActivities=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openPopup=_useState4[0],setOpenPopup=_useState4[1];var _useState5=useState({activityId:0,activityLevel:'MEDIUM',capacity:0,daysToRepeat:0,description:'test',equipments:[],groupId:0,image:'',latitude:0,longitude:0,registeredParticipants:[],tags:['SII'],time:1618924200000,timeCreated:1618830691000,title:'Test',user:1231323}),_useState6=_slicedToArray(_useState5,2),activity=_useState6[0],setActivity=_useState6[1];useEffect(function(){loadActivities();},[]);var deleteActivity=function deleteActivity(id){axios.delete(\"/activity/\".concat(id),config).then(function(){return loadActivities();});};var handleOnClick=function handleOnClick(eventInfo){console.log('token:'+localStorage.getItem('token'));console.log('refreshToken:'+localStorage.getItem('refreshToken'));console.log('bruker: '+user);console.log(activities);var activityID=eventInfo.event.extendedProps.ID;var url=\"/activity/\".concat(activityID);axios.get(url).then(function(response){setActivity(response.data);setOpenPopup(!openPopup);}).catch(function(error){console.log('Kunne ikke hente aktivitet: '+error.message);});};var handleEventEnter=function handleEventEnter(eventInfo){eventInfo.event.setProp('backgroundColor','#f66055');};var handleEventLeave=function handleEventLeave(eventInfo){var normalColor=eventInfo.event.extendedProps.formattedDate>todayStr?'#f44336':'#f66055';eventInfo.event.setProp('backgroundColor',normalColor);};var register=function register(activityId){console.log(activityId+' '+user);return new Promise(function(resolve){axios.post('/user/activity',{userId:user,activityId:activityId},config);resolve();});};var unRegister=function unRegister(activityId){return new Promise(function(resolve){axios.delete(\"/user/\".concat(user,\"/activity/\").concat(activityId),config).then(function(){return loadActivities();}).catch(function(error){console.log(error.response.data);});resolve();});};var loadActivities=function loadActivities(){var id=localStorage.getItem('userID');var url=\"/user/\".concat(id,\"/activity\");setActivities([]);axios.get(url,config).then(function(response){console.log(response.data['activities']);response.data['activities'].forEach(function(activity){var date=new Date(activity.time);var curr_date=date.getDate();var curr_month=date.getMonth()+1>=10?date.getMonth():'0'+(date.getMonth()+1);var curr_year=date.getFullYear();var curr_hour=date.getHours()-2<10?'0'+(date.getHours()-2):date.getHours()-2;var curr_minutes=date.getMinutes()==0?date.getMinutes()+'0':date.getMinutes();var curr_seconds=date.getSeconds()==0?date.getSeconds()+'0':date.getSeconds();var formattedDate=curr_year+'-'+curr_month+'-'+curr_date+'T'+curr_hour+':'+curr_minutes+':'+curr_seconds;var formattedEnd=curr_year+'-'+curr_month+'-'+curr_date+'T'+curr_hour+':'+curr_minutes+':'+curr_seconds;setActivities(function(activities){return[].concat(_toConsumableArray(activities),[{ID:activity.activityId,title:activity.title,start:formattedDate,end:formattedEnd,formattedDate:formattedDate,backgroundColor:formattedDate>todayStr?'#f44336':'#f66055'}]);});});}).catch(function(error){console.log(error.response.data);});};return/*#__PURE__*/_jsxs(CalendarContainer,{children:[/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin,timeGridPlugin,interactionPlugin],headerToolbar:{left:'prev,next today',center:'title',right:'dayGridMonth,timeGridWeek,timeGridDay'},height:\"750px\",initialView:\"timeGridWeek\",editable:true,selectable:false,selectMirror:true,dayMaxEvents:true,allDaySlot:false,locale:'en-GB',displayEventEnd:true,buttonText:{today:'I dag',month:'Måned',week:'Uke',day:'Dag'},slotEventOverlap:false,eventDisplay:'block',progressiveEventRendering:true,events:activities,firstDay:1,eventMouseEnter:handleEventEnter,eventMouseLeave:handleEventLeave,dayHeaderFormat:{weekday:'short',month:'numeric',day:'numeric',omitCommas:true,hour12:false},slotLabelFormat:{hour12:false,hour:'numeric',minute:'2-digit',omitZeroMinute:false,meridiem:'short'},eventClick:handleOnClick}),/*#__PURE__*/_jsx(Popup,{title:\"Legg til aktivitet\",openPopup:openPopup,setOpenPopup:setOpenPopup,maxWidth:\"md\",children:/*#__PURE__*/_jsx(ActivityInformation,{register:register,unRegister:unRegister,activity:activity,deleteActivity:deleteActivity,setOpenPopup:setOpenPopup,openPopup:openPopup})})]});};export default Calender;","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/containers/Calendar.tsx"],"names":["React","useContext","useEffect","useState","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","axios","styled","UserContext","Popup","ActivityInformation","config","CalendarContainer","div","todayStr","Date","toISOString","replace","toLocaleTimeString","Calender","user","activities","setActivities","openPopup","setOpenPopup","activityId","activityLevel","capacity","daysToRepeat","description","equipments","groupId","image","latitude","longitude","registeredParticipants","tags","time","timeCreated","title","activity","setActivity","loadActivities","deleteActivity","id","delete","then","handleOnClick","eventInfo","console","log","localStorage","getItem","activityID","event","extendedProps","ID","url","get","response","data","catch","error","message","handleEventEnter","setProp","handleEventLeave","normalColor","formattedDate","register","Promise","resolve","post","userId","unRegister","forEach","date","curr_date","getDate","curr_month","getMonth","curr_year","getFullYear","curr_hour","getHours","curr_minutes","getMinutes","curr_seconds","getSeconds","formattedEnd","start","end","backgroundColor","left","center","right","today","month","week","day","weekday","omitCommas","hour12","hour","minute","omitZeroMinute","meridiem"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { EventInput } from '@fullcalendar/react';\nimport axios from '../Axios';\nimport styled from 'styled-components';\nimport { UserContext } from '../UserContext';\nimport Popup from '../components/Popup';\nimport ActivityInformation from '../components/ActivityComponents/ActivityInformation';\nimport ActivityResponse from '../interfaces/ActivityResponse';\nimport config from '../Config';\n\nconst CalendarContainer = styled.div`\n    --fc-button-bg-color: #f44336;\n    --fc-button-active-bg-color: #f44336;\n    --fc-button-hover-bg-color: #f66055;\n    --fc-today-bg-color: #fde9e7;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n        'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n        'Helvetica Neue', sans-serif;\n    --fc-event-font-size: 50px;\n`;\n\nconst todayStr =\n    new Date().toISOString().replace(/T.*$/, '') +\n    'T' +\n    new Date().toLocaleTimeString();\n\nconst Calender = () => {\n    const { user } = useContext(UserContext);\n    const [activities, setActivities] = useState<EventInput[]>([]);\n    const [openPopup, setOpenPopup] = useState<boolean>(false);\n    const [activity, setActivity] = useState<ActivityResponse>({\n        activityId: 0,\n        activityLevel: 'MEDIUM',\n        capacity: 0,\n        daysToRepeat: 0,\n        description: 'test',\n        equipments: [],\n        groupId: 0,\n        image: '',\n        latitude: 0,\n        longitude: 0,\n        registeredParticipants: [],\n        tags: ['SII'],\n        time: 1618924200000,\n        timeCreated: 1618830691000,\n        title: 'Test',\n        user: 1231323\n    }\n    );\n\n\n    useEffect(() => {\n        loadActivities();\n    }, []);\n\n    const deleteActivity = (id: number) => {\n        axios\n            .delete(`/activity/${id}`, config)\n            .then(() => loadActivities());\n    };\n\n    const handleOnClick = (eventInfo: EventInput) => {\n        console.log('token:' + localStorage.getItem('token'));\n        console.log('refreshToken:' + localStorage.getItem('refreshToken'));\n        console.log('bruker: ' + user);\n        console.log(activities);\n        const activityID = eventInfo.event.extendedProps.ID;\n        const url = `/activity/${activityID}`;\n        axios\n            .get(url)\n            .then((response) => {\n                setActivity(response.data);\n                setOpenPopup(!openPopup);\n            })\n            .catch((error) => {\n                console.log('Kunne ikke hente aktivitet: ' + error.message);\n            });\n    };\n\n    const handleEventEnter = (eventInfo: any) => {\n        eventInfo.event.setProp('backgroundColor', '#f66055');\n    };\n\n    const handleEventLeave = (eventInfo: any) => {\n        const normalColor =\n            eventInfo.event.extendedProps.formattedDate > todayStr\n                ? '#f44336'\n                : '#f66055';\n        eventInfo.event.setProp('backgroundColor', normalColor);\n    };\n\n\n    const register = (activityId: number): Promise<void> => {\n        console.log(activityId + ' ' + user);\n        return new Promise((resolve) => {\n            axios\n                .post('/user/activity', {\n                    userId: user,\n                    activityId: activityId,\n                }, config);\n            resolve();\n        });\n    };\n\n    const unRegister = (activityId: number): Promise<void> => {\n        return new Promise((resolve) => {\n            axios\n                .delete(`/user/${user}/activity/${activityId}`, config)\n                .then(() => loadActivities()).catch(error => {\n                    console.log(error.response.data)\n                });\n            resolve();\n        });\n    };\n\n    const loadActivities = () => {\n        const id = localStorage.getItem('userID');\n        const url = `/user/${id}/activity`;\n        setActivities([])\n        axios\n            .get(url, config)\n            .then((response) => {\n                console.log(response.data['activities']);\n                response.data['activities'].forEach((activity: any) => {\n                    const date = new Date(activity.time);\n                    const curr_date = date.getDate();\n                    const curr_month =\n                        date.getMonth() + 1 >= 10\n                            ? date.getMonth()\n                            : '0' + (date.getMonth() + 1);\n                    const curr_year = date.getFullYear();\n                    const curr_hour =\n                        date.getHours() - 2 < 10\n                            ? '0' + (date.getHours() - 2)\n                            : date.getHours() - 2;\n                    const curr_minutes =\n                        date.getMinutes() == 0\n                            ? date.getMinutes() + '0'\n                            : date.getMinutes();\n                    const curr_seconds =\n                        date.getSeconds() == 0\n                            ? date.getSeconds() + '0'\n                            : date.getSeconds();\n                    const formattedDate =\n                        curr_year +\n                        '-' +\n                        curr_month +\n                        '-' +\n                        curr_date +\n                        'T' +\n                        curr_hour +\n                        ':' +\n                        curr_minutes +\n                        ':' +\n                        curr_seconds;\n                    const formattedEnd =\n                        curr_year +\n                        '-' +\n                        curr_month +\n                        '-' +\n                        curr_date +\n                        'T' +\n                        curr_hour +\n                        ':' +\n                        curr_minutes +\n                        ':' +\n                        curr_seconds;\n                    setActivities((activities) => [\n                        ...activities,\n                        {\n                            ID: activity.activityId,\n                            title: activity.title,\n                            start: formattedDate,\n                            end: formattedEnd,\n                            formattedDate: formattedDate,\n                            backgroundColor:\n                                formattedDate > todayStr\n                                    ? '#f44336'\n                                    : '#f66055',\n                        },\n                    ]);\n                });\n            })\n            .catch((error: any) => {\n                console.log(error.response.data)\n            });\n    };\n\n    return (\n        <CalendarContainer>\n            <FullCalendar\n                plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n                headerToolbar={{\n                    left: 'prev,next today',\n                    center: 'title',\n                    right: 'dayGridMonth,timeGridWeek,timeGridDay',\n                }}\n                height=\"750px\"\n                initialView=\"timeGridWeek\"\n                editable={true}\n                selectable={false}\n                selectMirror={true}\n                dayMaxEvents={true}\n                allDaySlot={false}\n                locale={'en-GB'}\n                displayEventEnd={true}\n                buttonText={{\n                    today: 'I dag',\n                    month: 'Måned',\n                    week: 'Uke',\n                    day: 'Dag',\n                }}\n                slotEventOverlap={false}\n                eventDisplay={'block'}\n                progressiveEventRendering={true}\n                events={activities}\n                firstDay={1}\n                eventMouseEnter={handleEventEnter}\n                eventMouseLeave={handleEventLeave}\n                dayHeaderFormat={{\n                    weekday: 'short',\n                    month: 'numeric',\n                    day: 'numeric',\n                    omitCommas: true,\n                    hour12: false,\n                }}\n                slotLabelFormat={{\n                    hour12: false,\n                    hour: 'numeric',\n                    minute: '2-digit',\n                    omitZeroMinute: false,\n                    meridiem: 'short',\n                }}\n                eventClick={handleOnClick}\n            />\n            <Popup\n                title=\"Legg til aktivitet\"\n                openPopup={openPopup}\n                setOpenPopup={setOpenPopup}\n                maxWidth=\"md\"\n            >\n                <ActivityInformation\n                    register={register}\n                    unRegister={unRegister}\n                    activity={activity}\n                    deleteActivity={deleteActivity}\n                    setOpenPopup={setOpenPopup}\n                    openPopup={openPopup}\n                />\n            </Popup>\n        </CalendarContainer>\n    );\n};\n\nexport default Calender;\n"]},"metadata":{},"sourceType":"module"}