{"ast":null,"code":"var _jsxFileName = \"/Users/olelokken/DEV/gidd/client/src/components/LeaderboardComponents/GroupLeaderboard.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, makeStyles } from '@material-ui/core';\nimport './GroupLeaderboard.css';\nimport UserAvatar from '../UserAvatar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 150,\n    margin: '3rem 1rem'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nconst GroupLeaderboard = ({\n  title,\n  users\n}) => {\n  _s();\n\n  const [placements, setPlacements] = useState([]);\n  const [totalPoints, setTotalPoints] = useState(0);\n  const classes = useStyles();\n\n  const sortPoints = () => {\n    return users.sort((u1, u2) => {\n      if (u1.points > u2.points) return -1;else if (u1.points < u2.points) return 1;else return 0;\n    });\n  };\n\n  const getPosition = user => {\n    let position = 0;\n    placements.forEach(p => {\n      if (p.user === user) position = p.position;\n    });\n    return position;\n  };\n\n  const getPlacements = () => {\n    const placements = [];\n    const sorted = sortPoints();\n\n    for (let i = 0; i < sorted.length; i++) {\n      placements.push({\n        user: sorted[i],\n        position: 1\n      });\n    }\n\n    let currentPos = 1;\n    let nextPos = 1;\n\n    for (let i = 0; i < placements.length - 1; i++) {\n      placements[i].position = currentPos;\n      nextPos++;\n\n      if (+placements[i].user.points > +placements[i + 1].user.points) {\n        currentPos = nextPos;\n      }\n\n      if (i === placements.length - 2) {\n        placements[i + 1].position = currentPos;\n      }\n    }\n\n    setPlacements(placements);\n  };\n\n  const getTotalPoints = () => {\n    let sum = 0;\n    users.forEach(user => {\n      sum += +user.points;\n    });\n    setTotalPoints(sum);\n  }; //The max margin-left is 52rem\n\n\n  const getMarginLeft = user => {\n    if (users.length > 5) return +user.points / totalPoints * 250;else return +user.points / totalPoints * 60;\n  };\n\n  useEffect(() => {\n    getPlacements();\n    getTotalPoints();\n    console.log(' ');\n  }, [users]);\n  const renderPlayers = users.map((user, index) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"groupleaderboard__players\",\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"groupleaderboard__line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"groupleaderboard__player\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          /* The max margin-left is 52rem on full size*/\n          style: {\n            margin: `0.7rem 0.5rem 0.5rem`,\n            marginLeft: users.length === 0 ? '0.5rem' : `${getMarginLeft(user)}%`,\n            display: 'flex',\n            flex: '1'\n          },\n          children: [/*#__PURE__*/_jsxDEV(UserAvatar, {\n            user: user,\n            type: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"groupleaderboard__name\",\n            children: user.firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"groupleaderboard__stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"groupleaderboard__stat1\",\n            children: [getPosition(user), \"rd Place\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"groupleaderboard__stat2\",\n            children: [user.points, \" points\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.root,\n    children: [title !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"groupleaderboard__header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }, this), renderPlayers, /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"groupleaderboard__line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 9\n  }, this);\n};\n\n_s(GroupLeaderboard, \"dlOVEl78+gddSBw84qCZjP0FNN8=\", false, function () {\n  return [useStyles];\n});\n\n_c = GroupLeaderboard;\nexport default GroupLeaderboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroupLeaderboard\");","map":{"version":3,"sources":["/Users/olelokken/DEV/gidd/client/src/components/LeaderboardComponents/GroupLeaderboard.tsx"],"names":["React","useEffect","useState","Card","makeStyles","UserAvatar","useStyles","root","minWidth","margin","bullet","display","transform","title","fontSize","pos","marginBottom","GroupLeaderboard","users","placements","setPlacements","totalPoints","setTotalPoints","classes","sortPoints","sort","u1","u2","points","getPosition","user","position","forEach","p","getPlacements","sorted","i","length","push","currentPos","nextPos","getTotalPoints","sum","getMarginLeft","console","log","renderPlayers","map","index","marginLeft","flex","firstName","undefined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport User from '../../interfaces/User';\nimport { Card, makeStyles } from '@material-ui/core';\nimport './GroupLeaderboard.css';\nimport UserAvatar from '../UserAvatar';\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 150,\n        margin: '3rem 1rem',\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n});\ninterface Props {\n    title?: string;\n    users: User[];\n}\n\nexport interface Placements {\n    user: User;\n    position: number;\n}\n\nconst GroupLeaderboard: React.FC<Props> = ({ title, users }: Props) => {\n    const [placements, setPlacements] = useState<Placements[]>([]);\n    const [totalPoints, setTotalPoints] = useState<number>(0);\n    const classes = useStyles();\n\n    const sortPoints = (): User[] => {\n        return users.sort((u1, u2) => {\n            if (u1.points > u2.points) return -1;\n            else if (u1.points < u2.points) return 1;\n            else return 0;\n        });\n    };\n\n    const getPosition = (user: User): number => {\n        let position = 0;\n        placements.forEach((p) => {\n            if (p.user === user) position = p.position;\n        });\n        return position;\n    };\n\n    const getPlacements = () => {\n        const placements: Placements[] = [];\n        const sorted = sortPoints();\n        for (let i = 0; i < sorted.length; i++) {\n            placements.push({ user: sorted[i], position: 1 });\n        }\n        let currentPos = 1;\n        let nextPos = 1;\n        for (let i = 0; i < placements.length - 1; i++) {\n            placements[i].position = currentPos;\n            nextPos++;\n            if (+placements[i].user.points > +placements[i + 1].user.points) {\n                currentPos = nextPos;\n            }\n            if (i === placements.length - 2) {\n                placements[i + 1].position = currentPos;\n            }\n        }\n        setPlacements(placements);\n    };\n\n    const getTotalPoints = () => {\n        let sum = 0;\n        users.forEach((user) => {\n            sum += +user.points;\n        });\n        setTotalPoints(sum);\n    };\n\n    //The max margin-left is 52rem\n    const getMarginLeft = (user: User) => {\n        if (users.length > 5) return (+user.points / totalPoints) * 250;\n        else return (+user.points / totalPoints) * 60;\n    };\n\n    useEffect(() => {\n        getPlacements();\n        getTotalPoints();\n        console.log(' ');\n    }, [users]);\n\n    const renderPlayers = users.map((user, index: number) => {\n        return (\n            <div className=\"groupleaderboard__players\" key={index}>\n                <hr className=\"groupleaderboard__line\" />\n                <div className=\"groupleaderboard__player\">\n                    <div\n                        /* The max margin-left is 52rem on full size*/\n                        style={{\n                            margin: `0.7rem 0.5rem 0.5rem`,\n                            marginLeft:\n                                users.length === 0\n                                    ? '0.5rem'\n                                    : `${getMarginLeft(user)}%`,\n                            display: 'flex',\n                            flex: '1',\n                        }}\n                    >\n                        <UserAvatar user={user} type=\"small\"></UserAvatar>\n                        <h6 className=\"groupleaderboard__name\">\n                            {user.firstName}\n                        </h6>\n                    </div>\n                    <div className=\"groupleaderboard__stats\">\n                        <h5 className=\"groupleaderboard__stat1\">\n                            {getPosition(user)}rd Place\n                        </h5>\n                        <h5 className=\"groupleaderboard__stat2\">\n                            {user.points} points\n                        </h5>\n                    </div>\n                </div>\n            </div>\n        );\n    });\n\n    return (\n        <Card className={classes.root}>\n            {title !== undefined && (\n                <div className=\"groupleaderboard__header\">\n                    <h1>{title}</h1>\n                </div>\n            )}\n            {renderPlayers}\n            <hr className=\"groupleaderboard__line\" />\n        </Card>\n    );\n};\n\nexport default GroupLeaderboard;\n"]},"metadata":{},"sourceType":"module"}